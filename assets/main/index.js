System.register("chunks:///_virtual/ChatController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,o,n,e;return{setters:[function(t){r=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,e=t.Component}],execute:function(){var c;o._RF.push({},"24d4cn56VlEiqKgfE5D3gyE","ChatController",void 0);var l=n.ccclass;n.property,t("ChatController",l("ChatController")(c=function(t){function o(){return t.apply(this,arguments)||this}return r(o,t),o}(e))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/CreatRoomView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,s,r,a,h,d,l,c,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.createClass,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){h=t.cclegacy,d=t._decorator,l=t.EditBox,c=t.Button,m=t.Component}],execute:function(){var u,p,E,f,D,w,N,v,C,R,b,g,F;h._RF.push({},"94c27qW1utO/7PCbOOfOwNa","CreatRoomView",void 0);var _=d.ccclass,y=d.property,T=(t("CreatRoomView",(u=_("CreatRoomView"),p=y({type:l}),E=y({type:l}),f=y({type:l}),D=y({type:c}),w=y({type:c}),u((C=e((v=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,i(e,"roomNameField",C,s(e)),i(e,"passwordField",R,s(e)),i(e,"betField",b,s(e)),i(e,"enterBtn",g,s(e)),i(e,"closeBtn",F,s(e)),e._createRoomData=new T,e}n(e,t);var o=e.prototype;return o.onLoad=function(){this.initButtonEvents(),this.initEditBoxEvents()},o.initButtonEvents=function(){this.enterBtn&&this.enterBtn.node.on(c.EventType.CLICK,this.onEnterClick,this),this.closeBtn&&this.closeBtn.node.on(c.EventType.CLICK,this.onCloseClick,this)},o.initEditBoxEvents=function(){this.roomNameField&&(this.roomNameField.node.on(l.EventType.EDITING_DID_ENDED,this.onRoomNameEndEdit,this),this.roomNameField.node.on(l.EventType.TEXT_CHANGED,this.onRoomNameChanged,this)),this.passwordField&&(this.passwordField.node.on(l.EventType.EDITING_DID_ENDED,this.onPasswordEndEdit,this),this.passwordField.node.on(l.EventType.TEXT_CHANGED,this.onPasswordChanged,this)),this.betField&&(this.betField.node.on(l.EventType.EDITING_DID_ENDED,this.onBetEndEdit,this),this.betField.node.on(l.EventType.TEXT_CHANGED,this.onBetChanged,this))},o.onRoomNameChanged=function(t){this._createRoomData.roomName=t.string.trim(),this.validateInput()},o.onPasswordChanged=function(t){this._createRoomData.password=t.string.trim()},o.onBetChanged=function(t){var e=parseInt(t.string);this._createRoomData.betAmount=isNaN(e)?0:e,this.validateInput()},o.onRoomNameEndEdit=function(t){this._createRoomData.roomName=t.string.trim(),console.log("Room name:",this._createRoomData.roomName)},o.onPasswordEndEdit=function(t){this._createRoomData.password=t.string.trim(),console.log("Password:",this._createRoomData.password)},o.onBetEndEdit=function(t){var e=parseInt(t.string);this._createRoomData.betAmount=isNaN(e)?0:e,console.log("Bet amount:",this._createRoomData.betAmount)},o.validateInput=function(){this.enterBtn&&(this.enterBtn.interactable=this._createRoomData.isValid())},o.onEnterClick=function(){this._createRoomData.isValid()?(console.log("创建房间数据:",this._createRoomData),this.sendCreateRoomRequest()):console.warn("输入数据无效")},o.sendCreateRoomRequest=function(){var t=r(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this._createRoomData.toServerFormat(),console.log("发送到服务器的数据:",e),t.next=5,this.mockCreateRoomRequest(e);case 5:t.sent?(console.log("房间创建成功"),this.clearInputs()):console.error("房间创建失败"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("创建房间请求错误:",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),o.mockCreateRoomRequest=function(){var t=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout((function(){t(Math.random()>.3)}),1e3)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.onCloseClick=function(){console.log("关闭创建面板"),this.node.active=!1,this.clearInputs()},o.getCreateRoomData=function(){return this._createRoomData.clone()},o.setCreateRoomData=function(t){this._createRoomData=t.clone(),this.updateUIFromData()},o.updateUIFromData=function(){this.roomNameField&&(this.roomNameField.string=this._createRoomData.roomName),this.passwordField&&(this.passwordField.string=this._createRoomData.password),this.betField&&(this.betField.string=this._createRoomData.betAmount.toString()),this.validateInput()},o.clearInputs=function(){this._createRoomData.clear(),this.roomNameField&&(this.roomNameField.string=""),this.passwordField&&(this.passwordField.string=""),this.betField&&(this.betField.string=""),this.validateInput()},o.onDestroy=function(){this.removeAllEventListeners()},o.removeAllEventListeners=function(){this.enterBtn&&this.enterBtn.node.off(c.EventType.CLICK,this.onEnterClick,this),this.closeBtn&&this.closeBtn.node.off(c.EventType.CLICK,this.onCloseClick,this),this.roomNameField&&(this.roomNameField.node.off(l.EventType.EDITING_DID_ENDED,this.onRoomNameEndEdit,this),this.roomNameField.node.off(l.EventType.TEXT_CHANGED,this.onRoomNameChanged,this)),this.passwordField&&(this.passwordField.node.off(l.EventType.EDITING_DID_ENDED,this.onPasswordEndEdit,this),this.passwordField.node.off(l.EventType.TEXT_CHANGED,this.onPasswordChanged,this)),this.betField&&(this.betField.node.off(l.EventType.EDITING_DID_ENDED,this.onBetEndEdit,this),this.betField.node.off(l.EventType.TEXT_CHANGED,this.onBetChanged,this))},e}(m)).prototype,"roomNameField",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(v.prototype,"passwordField",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(v.prototype,"betField",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(v.prototype,"enterBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(v.prototype,"closeBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=v))||N)),t("CreateRoomData",function(){function t(t,e,o){this.roomName="",this.password="",this.betAmount=0,t&&(this.roomName=t),e&&(this.password=e),o&&(this.betAmount=o)}var e=t.prototype;return e.isValid=function(){return this.roomName.length>0&&this.betAmount>0},e.toServerFormat=function(){return{roomName:this.roomName,password:this.password,betAmount:this.betAmount,needPassword:this.needPassword,timestamp:Date.now()}},e.clear=function(){this.roomName="",this.password="",this.betAmount=0},e.clone=function(){return new t(this.roomName,this.password,this.betAmount)},o(t,[{key:"needPassword",get:function(){return this.password.length>0}}]),t}()));h._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./StorageUtil.ts","./LanguageCore.ts"],(function(t){var e,n,a,r,o,i,c,u,l,s,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){i=t.cclegacy,c=t._decorator,u=t.Node,l=t.Component},function(t){s=t.UIManager},function(t){g=t.StorageUtil},function(t){f=t.LanguageCore}],execute:function(){var p,y,d,h,v,b,D;i._RF.push({},"17b5f338Q9AyqPPrAW0G32r","GameMain",void 0);var m=c.ccclass,I=c.property;t("GameMain",(p=m("GameMain"),y=I({type:u}),p(((D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,a(e,"uiroot",v,r(e)),e.savedPlayerData=void 0,a(e,"languageSet",b,r(e)),e.accountFullInfo=null,e}n(e,t);var i=e.prototype;return i.start=function(){e.instance=this,this.savedPlayerData=g.getObject("localLoginData",{account:"",password:"",remenberMe:!0,headIndex:0,currencyIndex:0,lastCurrency:"",musinOn:!0}),f.loadLanguage(this.languageSet),s.I.init(this.uiroot),s.I.open("ui/LoginPanel")},i.update=function(t){},i.doSavedPlayerData=function(){g.setObject("localLoginData",this.savedPlayerData)},o(e,[{key:"Account",get:function(){return this.accountFullInfo.account}},{key:"AccountData",get:function(){return this.accountFullInfo.accountData}}]),e}(l)).instance=void 0,v=e((h=D).prototype,"uiroot",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(h.prototype,"languageSet",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),d=h))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/HttpHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsonHelper.ts","./NetPort.ts","./TipPanel.ts","./GameMain.ts"],(function(e){var t,r,n,o,s,u,a,c,i,p;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,u=e.Component},function(e){a=e.JsonHelper},function(e){c=e.NetPort},function(e){i=e.TipPanel},function(e){p=e.GameMain}],execute:function(){var l,f;o._RF.push({},"c4f716ttotPmpZMFramSoqy","HttpHelper",void 0);var h=s.ccclass;e("HttpHelper",h("HttpHelper")(((f=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.getCurrencyStr=function(e){return e>=this.CurrencyName.length&&(e=0),this.CurrencyName[e]},o.setAuthToken=function(e){o.authToken=e},o.getAuthToken=function(){return o.authToken},o.doLogin=function(){var e=r(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.post(c.PostLogin,t);case 3:null!=(s=e.sent)?(this.authToken=s.data.toString(),null==r||r(this.authToken,s.errorCode)):i.showTips("Login Failed"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Login error:",e.t0),i.showTips("Login Failed");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),o.signInClick=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=c.PostRegister.replace("{0}",t),e.next=4,o.post(r,null);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Sign in error:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o.resetPassword=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=c.PostResetPassword.replace("{0}",t),e.next=4,this.post(r,null);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Reset password error:",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o.getAccount=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get(c.GetAccount,null);case 3:null!=(r=e.sent)&&(p.instance.accountFullInfo=r),null==t||t(r),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Get account error:",e.t0),null==t||t(null);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),o.getCurrency=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.get(c.GetCurrencys,null);case 3:r=e.sent,null==t||t(r),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Get currency error:",e.t0),null==t||t(null);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o.get=function(){var e=r(n().mark((function e(t,r){var s,u,i,p,l,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=c.httpApi+t,u=r?a.ToJson(r):"",i=s,r&&Object.keys(r).length>0){for(l in p=new URLSearchParams,r)r.hasOwnProperty(l)&&p.append(l,r[l].toString());i+="?"+p.toString()}return e.next=7,o.postRequest(i,u,!1);case 7:if(!(f=e.sent)||null===f.data||void 0===f.data){e.next=19;break}return e.prev=9,e.abrupt("return",f.data);case 13:return e.prev=13,e.t0=e.catch(9),console.error("JSON 解析错误:",e.t0),e.abrupt("return",null);case 17:e.next=20;break;case 19:return e.abrupt("return",null);case 20:e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(0),console.error("GET 请求错误:",e.t1),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[0,22],[9,13]])})));return function(t,r){return e.apply(this,arguments)}}(),o.post=function(){var e=r(n().mark((function e(t,r){var s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=c.httpApi+t,u=r?a.ToJson(r):"",e.next=5,o.postRequest(s,u,!0);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),console.error("POST 请求错误:",e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),o.postRequest=function(){var e=r(n().mark((function e(t,r,s){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(n.status>=200&&n.status<300)try{console.log("Received: "+n.responseText);var r=a.DecodeJson(n.responseText);e(r)}catch(t){console.error("响应解析错误:",t,"Response:",n.responseText),e(null)}else console.error("HTTP Error: "+n.status,"URL:",t,"Response:",n.responseText),e(null)},n.onerror=function(){console.error("Network Error","URL:",t),e(null)},n.ontimeout=function(){console.error("Request Timeout","URL:",t),e(null)};var u=s?"POST":"GET";n.open(u,t,!0),n.timeout=1e4,n.setRequestHeader("Content-Type","application/json"),o.authToken&&n.setRequestHeader("Authorization","Bearer "+o.authToken),s&&r?n.send(r):n.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),o.safeInvoke=function(e,t){try{e&&e(t)}catch(e){console.error("回调函数执行错误:",e)}},o}(u)).authToken="",f.CurrencyName=["RMB","USD","MYR"],f.CurrencyList=[],l=f))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/InfiniteScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RoomItem.ts"],(function(t){var e,i,o,n,l,s,r,a,h,c,f,u,m,I,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,l=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,r=t._decorator,a=t.Prefab,h=t.Node,c=t.ScrollView,f=t.instantiate,u=t.UITransform,m=t.math,I=t.Component},function(t){p=t.RoomItem}],execute:function(){var d,g,b,v,w,y,V,S,C,z,D;s._RF.push({},"41cc7kidHxJnqnsSyXPsbBM","InfiniteScrollView",void 0);var R=r.ccclass,E=r.property;t("InfiniteScrollView",(d=R("InfiniteScrollView"),g=E({type:a}),b=E({type:h}),v=E({type:c}),d((V=e((y=function(t){function e(){for(var e,i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return e=t.call.apply(t,[this].concat(l))||this,o(e,"roomItemPrefab",V,n(e)),o(e,"contentNode",S,n(e)),o(e,"scrollView",C,n(e)),o(e,"itemHeight",z,n(e)),o(e,"bufferSize",D,n(e)),e.pool=[],e.visibleItems=[],e.allRoomData=[],e.totalItemCount=0,e.scrollOffset=0,e.isInitialized=!1,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.initializePool(),this.setupScrollEvents(),this.isInitialized=!0},s.initializePool=function(){if(this.roomItemPrefab&&this.contentNode){var t=this.getViewHeight(),e=Math.ceil(t/this.itemHeight)+2*this.bufferSize;console.log("Initializing pool with "+e+" items, view height: "+t);for(var i=0;i<e;i++){var o=f(this.roomItemPrefab);this.pool.push(o),o.active=!1,o.setParent(this.contentNode)}}},s.setupScrollEvents=function(){this.scrollView&&(this.scrollView.node.on(c.EventType.SCROLL_ENDED,this.onScroll,this),this.scrollView.node.on(c.EventType.SCROLLING,this.onScroll,this))},s.initializeData=function(t){this.isInitialized?(this.allRoomData=t,this.totalItemCount=t.length,console.log("Initializing data with "+this.totalItemCount+" items"),this.updateContentSize(),this.refreshVisibleItems()):console.warn("Component not initialized yet")},s.updateContentSize=function(){if(this.contentNode){var t=this.contentNode.getComponent(u);t&&(t.height=this.totalItemCount*this.itemHeight,console.log("Content height updated to: "+t.height))}},s.getViewHeight=function(){if(this.scrollView&&this.scrollView.node){var t=this.scrollView.node.getComponent(u);return t?t.height:600}return 600},s.getScrollOffset=function(){if(!this.scrollView)return 0;try{var t=this.scrollView.getScrollOffset();return Math.max(0,t.y)}catch(t){return console.warn("Error getting scroll offset:",t),0}},s.onScroll=function(){0!==this.totalItemCount&&(this.scrollOffset=this.getScrollOffset(),this.refreshVisibleItems())},s.refreshVisibleItems=function(){if(0!==this.totalItemCount&&this.contentNode)try{var t=Math.max(0,Math.floor(this.scrollOffset/this.itemHeight)),e=Math.ceil(this.getViewHeight()/this.itemHeight),i=Math.min(t+e+2*this.bufferSize,this.totalItemCount-1);console.log("Refreshing items from "+t+" to "+i+", offset: "+this.scrollOffset),this.recycleInvisibleItems(t,i),this.showVisibleItems(t,i)}catch(t){console.error("Error in refreshVisibleItems:",t)}},s.recycleInvisibleItems=function(t,e){for(var i=this.visibleItems.length-1;i>=0;i--){var o=this.visibleItems[i],n=o.getItemIndex();if(n<t-this.bufferSize||n>e+this.bufferSize)try{o.node.active=!1,this.pool.push(o.node),this.visibleItems.splice(i,1)}catch(t){console.warn("Error recycling item:",t)}}},s.showVisibleItems=function(t,e){for(var i=this,o=function(t){if(t>=i.totalItemCount)return 0;if(!i.visibleItems.find((function(e){return e.getItemIndex()===t}))){var e=null;if(i.pool.length>0?e=i.pool.pop():i.roomItemPrefab&&(e=f(i.roomItemPrefab),i.contentNode&&e.setParent(i.contentNode)),!e)return console.warn("Failed to get item node from pool"),1;var o=-t*i.itemHeight-i.itemHeight/2;e.setPosition(0,o),e.active=!0;var n=e.getComponent(p);n&&(n.updateItem(t,i.allRoomData[t]),i.visibleItems.push(n))}},n=t;n<=e&&0!==o(n);n++);},s.updateItem=function(t,e){if(t>=0&&t<this.totalItemCount){this.allRoomData[t]=e;var i=this.visibleItems.find((function(e){return e.getItemIndex()===t}));i&&i.updateItem(t,e)}},s.addData=function(t){this.allRoomData.push(t),this.totalItemCount=this.allRoomData.length,this.updateContentSize(),this.refreshVisibleItems()},s.removeData=function(t){t>=0&&t<this.totalItemCount&&(this.allRoomData.splice(t,1),this.totalItemCount=this.allRoomData.length,this.recycleAllItems(),this.updateContentSize(),this.refreshVisibleItems())},s.recycleAllItems=function(){for(var t,e=l(this.visibleItems);!(t=e()).done;){var i=t.value;try{i.node.active=!1,this.pool.push(i.node)}catch(t){console.warn("Error recycling all items:",t)}}this.visibleItems=[]},s.scrollTo=function(t,e){if(void 0===e&&(e=!0),t>=0&&t<this.totalItemCount&&this.scrollView){var i=t*this.itemHeight;e?this.scrollView.scrollTo(new m.Vec2(0,i),.3):this.scrollView.scrollToOffset(new m.Vec2(0,i))}},s.clearAll=function(){this.allRoomData=[],this.totalItemCount=0,this.recycleAllItems(),this.updateContentSize()},s.onDestroy=function(){this.scrollView&&(this.scrollView.node.off(c.EventType.SCROLL_ENDED,this.onScroll,this),this.scrollView.node.off(c.EventType.SCROLLING,this.onScroll,this)),this.pool.forEach((function(t){t&&t.isValid&&t.destroy()})),this.pool=[]},e}(I)).prototype,"roomItemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(y.prototype,"contentNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(y.prototype,"scrollView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(y.prototype,"itemHeight",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),D=e(y.prototype,"bufferSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),w=y))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/JsonHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,t,o;return{setters:[function(r){n=r.inheritsLoose},function(r){e=r.cclegacy,t=r._decorator,o=r.Component}],execute:function(){var s;e._RF.push({},"98854HpnlhExrq35f8FotnO","JsonHelper",void 0);var c=t.ccclass;t.property,r("JsonHelper",c("JsonHelper")(s=function(r){function e(){return r.apply(this,arguments)||this}return n(e,r),e.ToJson=function(r){try{return JSON.stringify(r)}catch(r){return console.error("JSON 序列化错误:",r),"{}"}},e.DecodeJson=function(r){try{return JSON.parse(r)}catch(n){return console.error("JSON 反序列化错误:",n,"String:",r+"  "),"string"!=typeof r&&console.warn("输入不是字符串",r),{}}},e.DecodeJson2=function(r){try{if("string"!=typeof(r=r.toString()))return console.warn("输入不是字符串",r),{};var n=r.trim();return 65279===n.charCodeAt(0)&&(n=n.substring(1)),n.startsWith("callback(")&&n.endsWith(")")&&(n=n.substring(9,n.length-1)),JSON.parse(n)}catch(n){return console.error("JSON 反序列化错误:",n),console.error("问题字符串:",r),{}}},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageCore.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,a,i,o,u,s,c,l,g,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Label,l=e.RichText,g=e.Component,h=e.resources}],execute:function(){var p,f,L,d,b,x,m,v,C;u._RF.push({},"2775fC6NeBJn6MA+WraIZHD","LanguageCore",void 0);var y=s.ccclass,w=s.property;e("LanguageCore",(p=y("LanguageCore"),f=w({type:c}),L=w({type:l}),p(((C=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,r(n,"LanguageID",x,a(n)),r(n,"labelText",m,a(n)),r(n,"richText",v,a(n)),n}return t(n,e),n.prototype.start=function(){null==this.labelText&&(this.labelText=this.node.getComponent(c)),null==this.richText&&(this.richText=this.node.getComponent(l));var e=n.getLang(this.LanguageID);null!=this.labelText&&(this.labelText.string=e),null!=this.richText&&(this.richText.string=e)},n.loadLanguage=function(){var e=i(o().mark((function e(n){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadingPromises.has(n)){e.next=2;break}return e.abrupt("return",this.loadingPromises.get(n));case 2:if(!this.languageCache.has(n)){e.next=6;break}return console.log("语言 "+n+" 已缓存，直接使用"),this.currentLanguage=n,e.abrupt("return",!0);case 6:return t=new Promise(i(o().mark((function e(t,a){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("开始加载语言: "+n),e.next=4,new Promise((function(e,t){h.load("i18n/"+n,(function(n,r){n?t(n):e(r)}))}));case 4:i=e.sent,r.languageCache.set(n,i.json),r.currentLanguage=n,console.log("语言 "+n+" 加载并缓存成功"),t(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("加载语言 "+n+" 失败:",e.t0),a(e.t0);case 15:return e.prev=15,r.loadingPromises.delete(n),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})))),this.loadingPromises.set(n,t),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),n.getLang=function(e,n){var t=n||this.currentLanguage,r=this.languageCache.get(t);if(!r)return console.warn("语言 "+t+" 未加载"),"["+e+"]";var a=r[e];return void 0===a?(console.warn("未找到键值: "+e+" 在语言 "+t+" 中"),"["+e+"]"):a},n.preloadLanguages=function(){var e=i(o().mark((function e(n){var t,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e){return r.loadLanguage(e)})),e.next=3,Promise.all(t);case 3:console.log("所有语言预加载完成");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),n.getCurrentLanguage=function(){return this.currentLanguage},n.setCurrentLanguage=function(e){this.languageCache.has(e)?(this.currentLanguage=e,console.log("当前语言已切换为: "+e)):console.warn("语言 "+e+" 未加载，无法切换")},n.isLanguageLoaded=function(e){return this.languageCache.has(e)},n.getLoadedLanguages=function(){return Array.from(this.languageCache.keys())},n.clearCache=function(){this.languageCache.clear(),console.log("语言缓存已清空")},n}(g)).languageCache=new Map,C.currentLanguage="zh",C.loadingPromises=new Map,x=n((b=C).prototype,"LanguageID",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),m=n(b.prototype,"labelText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"richText",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));u._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageSpCore.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,a,i,o,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,u=e.Sprite,l=e.Component}],execute:function(){var c,p,s,g,f,b;i._RF.push({},"3fb93txFuZJRbN8Gea4CWiT","LanguageSpCore",void 0);var y=o.ccclass,L=o.property;e("LanguageSpCore",(c=y("LanguageSpCore"),p=L({type:u}),c((f=t((g=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"LanguageID",f,a(t)),n(t,"labelText",b,a(t)),t}r(t,e);var i=t.prototype;return i.start=function(){},i.update=function(e){},t}(l)).prototype,"LanguageID",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),b=t(g.prototype,"labelText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=g))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/LobbyPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InfiniteScrollView.ts","./UIManager.ts","./UIDefine.ts","./TopBarMain.ts","./SignalRManager.ts","./GameMain.ts"],(function(t){var n,e,o,i,r,a,c,s,u,l,f,h,p,m,v,y,R;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,u=t.Node,l=t.Button,f=t.Component},function(t){h=t.InfiniteScrollView},function(t){p=t.UIManager},function(t){m=t.UIDefine},function(t){v=t.TopBarMain},function(t){y=t.SignalRManager},function(t){R=t.GameMain}],execute:function(){var C,b,d,w,B,k,g,L,M,I,S,T,E,x,z,V,J,K,D;c._RF.push({},"2b8e1LNXqFKo5Jy12xIN6SB","LobbyPanel",void 0);var P=s.ccclass,q=s.property;t("LobbyPanel",(C=P("LobbyPanel"),b=q({type:u}),d=q({type:l}),w=q({type:l}),B=q({type:u}),k=q({type:h}),g=q({type:l}),L=q({type:l}),M=q({type:v}),C((T=n((S=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(n,"BaseContent",T,i(n)),o(n,"quickJoinBtn",E,i(n)),o(n,"freeRoom",x,i(n)),o(n,"topbar",z,i(n)),o(n,"infiniteScrollView",V,i(n)),o(n,"creatRoomBtn",J,i(n)),o(n,"searchRoomBtn",K,i(n)),o(n,"topBarMain",D,i(n)),n.timer=20,n}e(n,t);var c=n.prototype;return c.start=function(){var t;this.infiniteScrollView.node.active=!1;var n=null==(t=R.instance.AccountData)?void 0:t.gold;this.topBarMain.setCoinsCount(n),this.switchRoom(!1)},c.switchRoom=function(t){this.BaseContent.active=!t,this.infiniteScrollView.node.active=t},c.update=function(t){this.timer+=t,this.timer>=15&&(this.UpdateRoomList(),this.timer=0)},c.UpdateRoomList=function(){this.refreshRoomList()},c.onLoad=function(){this.initButtonEvents()},c.initButtonEvents=function(){this.quickJoinBtn&&this.quickJoinBtn.node.on(l.EventType.CLICK,this.onQuickJoinClick,this),this.freeRoom&&this.freeRoom.node.on(l.EventType.CLICK,this.onFreeRoomClick,this),this.creatRoomBtn&&this.creatRoomBtn.node.on(l.EventType.CLICK,this.onCreateRoomClick,this),this.searchRoomBtn&&this.searchRoomBtn.node.on(l.EventType.CLICK,this.onSearchRoomClick,this),this.topBarMain.backBtn.node.on(l.EventType.CLICK,this.CloseRoomList,this)},c.onQuickJoinClick=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.onFreeRoomClick=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.switchRoom(!0);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.CloseRoomList=function(){this.switchRoom(!1)},c.onCreateRoomClick=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("创建房间按钮被点击"),p.I.open(m.CreatRoomView);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.onSearchRoomClick=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("搜索房间按钮被点击"),p.I.open(m.SerchContentView);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.joinRoom=function(){var t=r(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("加入房间: "+n);case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c.openSearchRoomPanel=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("打开搜索房间面板");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.enterGameScene=function(){console.log("进入游戏场景")},c.onDestroy=function(){this.removeButtonEvents()},c.removeButtonEvents=function(){this.quickJoinBtn&&this.quickJoinBtn.node.off(l.EventType.CLICK,this.onQuickJoinClick,this),this.freeRoom&&this.freeRoom.node.off(l.EventType.CLICK,this.onFreeRoomClick,this),this.creatRoomBtn&&this.creatRoomBtn.node.off(l.EventType.CLICK,this.onCreateRoomClick,this),this.searchRoomBtn&&this.searchRoomBtn.node.off(l.EventType.CLICK,this.onSearchRoomClick,this)},c.refreshRoomList=function(){var t=r(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log("刷新房间列表"),!this.infiniteScrollView){t.next=8;break}return t.next=5,y.getRooms();case 5:n=t.sent,console.log("返回房间列表 "+n.length),this.infiniteScrollView.initializeData(n);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("刷新房间列表失败:",t.t0);case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,this,[[0,10,13,15]])})));return function(){return t.apply(this,arguments)}}(),n}(f)).prototype,"BaseContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(S.prototype,"quickJoinBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(S.prototype,"freeRoom",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"topbar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(S.prototype,"infiniteScrollView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(S.prototype,"creatRoomBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(S.prototype,"searchRoomBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(S.prototype,"topBarMain",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=S))||I)),t("createTestRoomData",(function(){for(var t=["欢乐斗地主","经典麻将房","德州扑克高手","跑得快俱乐部","炸金花乐园","斗牛竞技场","十三水大师","二八杠专场","拼十王者","二十一点赌场","幸运轮盘","百家乐VIP","骰宝娱乐","龙虎斗战场","番摊挑战","牌九传统","牛牛狂欢","三公对决","十点半休闲","升级比赛"],n=[],e=0;e<20;e++){var o="ROOM"+(1e3+e).toString(),i=Math.random()>.2,r=Math.random()>.7,a=Math.random()>.5;n.push({id:o,name:i?t[e]:void 0,bet:Math.floor(1e3*Math.random())+100,playerCount:Math.floor(6*Math.random())+1,needPassword:r,isChallenge:a})}return n}));c._RF.pop()}}}));

System.register("chunks:///_virtual/LoginPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./HttpHelper.ts","./TipPanel.ts","./LanguageCore.ts","./SignalRManager.ts","./UIManager.ts","./UIDefine.ts","./GameMain.ts"],(function(t){var n,e,i,r,o,a,c,s,u,l,d,h,g,y,p,f,C,b,P,m,w,I;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,s=t._decorator,u=t.Label,l=t.EditBox,d=t.Toggle,h=t.Button,g=t.Node,y=t.instantiate},function(t){p=t.UIBase},function(t){f=t.HttpHelper},function(t){C=t.TipPanel},function(t){b=t.LanguageCore},function(t){P=t.SignalRManager},function(t){m=t.UIManager},function(t){w=t.UIDefine},function(t){I=t.GameMain}],execute:function(){var v,B,L,S,D,k,E,R,F,z,A,M,T,U,H,x,_,G,V,N,j,X,Y;c._RF.push({},"3d3c2XouRRLZpmC3f6EvmlH","LoginPanel",void 0);var Z=s.ccclass,q=s.property;t("LoginPanel",(v=Z("LoginPanel"),B=q({type:u}),L=q({type:l}),S=q({type:l}),D=q({type:d}),k=q({type:h}),E=q({type:h}),R=q({type:g}),F=q({type:g}),z=q({type:g}),A=q({type:h}),v((U=n((T=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,i(n,"currencyLabel",U,r(n)),i(n,"accountInput",H,r(n)),i(n,"passwordInput",x,r(n)),i(n,"toggleRemeber",_,r(n)),i(n,"fotPaword",G,r(n)),i(n,"openSelectCurrcyBtn",V,r(n)),i(n,"selectCurrcy",N,r(n)),i(n,"buttonParent",j,r(n)),i(n,"currencyButtonItem",X,r(n)),i(n,"loginBtn",Y,r(n)),n.loginC2S={Account:"",Password:"",Email:"",Currency:""},n.currencyButtonItems=[],n}e(n,t);var c=n.prototype;return c.onLoad=function(){this.initUI(),this.loadCurrencyData()},c.initUI=function(){this.selectCurrcy&&(this.selectCurrcy.active=!1),this.currencyButtonItem&&(this.currencyButtonItem.active=!1),this.accountInput&&(this.accountInput.node.on("editing-did-ended",this.onAccountInputFieldEndEdit,this),this.accountInput.string=I.instance.savedPlayerData.account,this.loginC2S.Account=I.instance.savedPlayerData.account),this.passwordInput&&(this.passwordInput.node.on("editing-did-ended",this.onPasswordInputFieldEndEdit,this),this.passwordInput.string=I.instance.savedPlayerData.password,this.loginC2S.Password=I.instance.savedPlayerData.password),this.toggleRemeber&&(this.toggleRemeber.isChecked=I.instance.savedPlayerData.remenberMe,this.toggleRemeber.node.on("toggle",this.onRememberValueChanged,this)),this.fotPaword&&this.fotPaword.node.on("click",this.onForgetPasswordClick,this),this.loginBtn.node.on("click",this.onLoginBtnClick,this),this.openSelectCurrcyBtn&&this.openSelectCurrcyBtn.node.on("click",this.onCurrencyButtonClick,this)},c.loadCurrencyData=function(){var t=this;f.getCurrency((function(n){n&&n.length>0&&(f.CurrencyList=n,I.instance.savedPlayerData.lastCurrency||(I.instance.savedPlayerData.lastCurrency=n[0],I.instance.doSavedPlayerData()),t.updateCurrencyDisplay())}))},c.onRememberValueChanged=function(t){I.instance.savedPlayerData.remenberMe=t.isChecked,I.instance.doSavedPlayerData()},c.onAccountInputFieldEndEdit=function(t){this.loginC2S.Account=t.string},c.onForgetPasswordClick=function(){this.loginC2S.Account?(f.resetPassword(this.loginC2S.Account),C.showTips(b.getLang("119"))):C.showTips("Please enter your account.")},c.onPasswordInputFieldEndEdit=function(t){this.loginC2S.Password=t.string},c.onLoginBtnClick=function(){var t=this;this.loginC2S.Account&&this.loginC2S.Password?(this.loginC2S.Email=this.loginC2S.Account,this.loginC2S.Currency=I.instance.savedPlayerData.lastCurrency,console.log("Login data "+this.loginC2S),f.doLogin(this.loginC2S,(function(n,e){n?(I.instance.savedPlayerData.account=t.loginC2S.Account,I.instance.savedPlayerData.password=t.loginC2S.Password,I.instance.doSavedPlayerData(),C.showTips("Login in success "+e),f.getAccount((function(n){n?(I.instance.accountFullInfo=n,t.LoginMainPaga()):C.showTips("Login in Failed")}))):C.showTips("Login in Failed "+e)}))):C.showTips("Your account number or password is not entered.")},c.LoginMainPaga=function(){var t=o(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.initialize();case 2:t.sent&&(m.I.open(w.LobbyPanel),m.I.close(w.LoginPanel));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.onCurrencyButtonClick=function(){this.showCurrencySelection()},c.updateCurrencyDisplay=function(){this.currencyLabel&&(this.currencyLabel.string=I.instance.savedPlayerData.lastCurrency)},c.showCurrencySelection=function(){var t=this;if(this.selectCurrcy&&this.currencyButtonItem){this.currencyButtonItems.forEach((function(t){return t.active=!1}));for(var n=f.CurrencyList,e=function(e){var i=t.getCurrencyButtonItem(e),r=i.getComponentInChildren(u);r&&(r.string=n[e]);var o=i.getChildByName("Light");o&&(o.active=n[e]===I.instance.savedPlayerData.lastCurrency);var a=i.getComponent(h);a&&(a.node.off("click"),a.node.on("click",(function(){t.selectCurrency(n[e])}))),i.active=!0},i=0;i<n.length;i++)e(i);this.selectCurrcy.active=!0}},c.getCurrencyButtonItem=function(t){if(t<this.currencyButtonItems.length)return this.currencyButtonItems[t];if(!this.currencyButtonItem)return new g;var n=y(this.currencyButtonItem);return this.buttonParent&&this.buttonParent.addChild(n),this.currencyButtonItems.push(n),n},c.selectCurrency=function(t){I.instance.savedPlayerData.lastCurrency=t,this.updateCurrencyDisplay(),this.closeCurrencySelection(),I.instance.doSavedPlayerData()},c.closeCurrencySelection=function(){this.selectCurrcy&&(this.selectCurrcy.active=!1)},c.onDestroy=function(){this.accountInput&&this.accountInput.node.off("editing-did-ended",this.onAccountInputFieldEndEdit,this),this.passwordInput&&this.passwordInput.node.off("editing-did-ended",this.onPasswordInputFieldEndEdit,this),this.toggleRemeber&&this.toggleRemeber.node.off("toggle",this.onRememberValueChanged,this),this.fotPaword&&this.fotPaword.node.off("click",this.onForgetPasswordClick,this),this.selectCurrcy&&this.selectCurrcy.off("click",this.onCurrencyButtonClick,this),this.loginBtn.node.off("click",this.onLoginBtnClick,this)},n}(p)).prototype,"currencyLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(T.prototype,"accountInput",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(T.prototype,"passwordInput",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(T.prototype,"toggleRemeber",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(T.prototype,"fotPaword",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(T.prototype,"openSelectCurrcyBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(T.prototype,"selectCurrcy",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(T.prototype,"buttonParent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(T.prototype,"currencyButtonItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(T.prototype,"loginBtn",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=T))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ChatController.ts","./GameMain.ts","./HttpHelper.ts","./NetMsg.ts","./NetPort.ts","./SignalRManager.ts","./JsonHelper.ts","./LanguageCore.ts","./LanguageSpCore.ts","./StorageUtil.ts","./UIBase.ts","./UIDefine.ts","./UIManager.ts","./CreatRoomView.ts","./InfiniteScrollView.ts","./LobbyPanel.ts","./LoginPanel.ts","./RoomItem.ts","./RoomListManager.ts","./SerchContentView.ts","./TipPanel.ts","./TopBarMain.ts","./debug-view-runtime-control.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NetMsg.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,i;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,i=t.Component}],execute:function(){var u;o._RF.push({},"4c198KBoT5F5Znrm+1ROevh","NetMsg",void 0);var s=r.ccclass,c=(r.property,t("NetMsg",s("NetMsg")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.update=function(t){},n}(i))||u),t("ApiClientResult",function(){function t(t,e){this.errorCode=void 0,this.data=void 0,this.errorCode=t,this.data=e}return n(t,[{key:"isSuccessful",get:function(){return 0===this.errorCode}}]),t}()));t("ApiClientResultVoid",function(t){function n(e){return t.call(this,e,null)||this}return e(n,t),n}(c)),t("GameStage",function(t){return t[t.Bet=0]="Bet",t[t.Countdown=1]="Countdown",t[t.Computing=2]="Computing",t[t.Settlement=3]="Settlement",t}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/NetPort.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o;return{setters:[function(t){e=t.createClass,n=t.inheritsLoose},function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"ba761UK+8tNio2887OK7b7h","NetPort",void 0);var r=t("NetPort",(function(){}));r.httpApi="https://dice-api.hudada.online/",r.signalRApi="https://dice-api.hudada.online/",r.PostRegister="account/register?email={0}",r.PostResetPassword="account/resetpassword?email={0}",r.PostLogin="account/login",r.PostLogout="account/loginout",r.GetAccount="account/info",r.GetCurrencys="configuration/currencys",r.GetRooms="GetRooms",r.CreateRoom="CreateRoom",r.EnterRoom="EnterRoom",r.ExitRoom="ExitRoom",r.ChosePoint="ChosePoint",r.OnCountdown="OnCountdown",r.OnComputing="OnComputing",r.OnBet="OnBet",r.OnSettled="OnSettled",r.OnError="OnError",r.GetGold="GetGold";var i=t("ApiClientResult",function(){function t(t,e){this.errorCode=void 0,this.data=void 0,this.errorCode=t,this.data=e}return e(t,[{key:"isSuccessful",get:function(){return 0===this.errorCode}}]),t}()),u=t("ApiClientResultSimple",function(t){function e(e){return t.call(this,e,null)||this}return n(e,t),e}(i));t("GameStage",function(t){return t.bet="Bet",t.countdown="Countdown",t.computing="Computing",t.settlement="Settlement",t}({})),t("ApiUtils",function(){function t(){}return t.createSuccessResult=function(t){return new i(0,t)},t.createErrorResult=function(t,e){return new i(t,e)},t.createSimpleErrorResult=function(t){return new u(t)},t}()),t("ValidationUtils",function(){function t(){}return t.isPlayerCreateRoomInfoValid=function(t){return t.bet>=10},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/RoomItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,r,l,u,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,u=t.Node,a=t.Label,s=t.Component}],execute:function(){var c,m,f,p,b,h,I,y,g,d,_,N,D,R,v,w,z;r._RF.push({},"1de6c/Y5RNEd76aXUC28lDn","RoomItem",void 0);var k=l.ccclass,C=l.property;t("RoomItem",(c=k("RoomItem"),m=C({type:u}),f=C({type:a}),p=C({type:a}),b=C({type:a}),h=C({type:a}),I=C({type:a}),y=C({type:u}),c((_=e((d=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"lightHint",_,i(e)),n(e,"roomName",N,i(e)),n(e,"roomID",D,i(e)),n(e,"betInfo",R,i(e)),n(e,"betAmount",v,i(e)),n(e,"roleNum",w,i(e)),n(e,"lockObj",z,i(e)),e._roomInfo=null,e._itemIndex=-1,e}o(e,t);var r=e.prototype;return r.getItemIndex=function(){return this._itemIndex},r.updateItem=function(t,e){this._itemIndex=t,this._roomInfo=e,this.roomName&&(this.roomName.string=e.name||""),this.roomID&&(this.roomID.string=e.id?e.id.toString():""),this.betInfo&&(this.betInfo.string="押注:"),this.betAmount&&(this.betAmount.string=e.bet?e.bet.toString():""),this.roleNum&&(this.roleNum.string=e.playerCount+""),this.lockObj&&(this.lockObj.active=e.needPassword||!1),this.lightHint},r.getRoomInfo=function(){return this._roomInfo},r.onItemClick=function(){console.log("Room selected:",this._roomInfo),this._roomInfo.needPassword||this.callJoinRoom()},r.callJoinRoom=function(){},r.start=function(){this.node.on(u.EventType.TOUCH_END,this.onItemClick,this)},r.onDestroy=function(){this.node.off(u.EventType.TOUCH_END,this.onItemClick,this)},e}(s)).prototype,"lightHint",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(d.prototype,"roomName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(d.prototype,"roomID",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(d.prototype,"betInfo",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"betAmount",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(d.prototype,"roleNum",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(d.prototype,"lockObj",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/RoomListManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,r,e;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,e=t.Component}],execute:function(){var a;n._RF.push({},"02295kqjO5JFqG/LWDSow0c","RoomListManager",void 0);var c=r.ccclass;r.property,t("RoomListManager",c("RoomListManager")(a=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(e))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/SerchContentView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIManager.ts","./UIDefine.ts"],(function(t){var n,e,i,o,s,r,c,l,a,u,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.EditBox,l=t.Button},function(t){a=t.UIBase},function(t){u=t.UIManager},function(t){h=t.UIDefine}],execute:function(){var I,p,f,d,B,D,E,v,C;s._RF.push({},"6d688wt1DpM1onz/8PGGdIS","SerchContentView",void 0);var y=r.ccclass,g=r.property;t("SerchContentView",(I=y("SerchContentView"),p=g({type:c}),f=g({type:l}),d=g({type:l}),I((E=n((D=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,i(n,"iDInputField",E,o(n)),i(n,"closeUIBtn",v,o(n)),i(n,"enterBtn",C,o(n)),n.searchBackInfo=0,n}e(n,t);var s=n.prototype;return s.onLoad=function(){this.initEvents()},s.initEvents=function(){this.iDInputField&&this.iDInputField.node.on(c.EventType.EDITING_DID_ENDED,this.onIDInputFieldEndEdit,this),this.enterBtn&&this.enterBtn.node.on(l.EventType.CLICK,this.onEnterBtnClick,this),this.closeUIBtn&&this.closeUIBtn.node.on(l.EventType.CLICK,this.onCloseBtnClick,this)},s.onBetInputFieldEndEdit=function(t){var n=t.string,e=parseInt(n);this.searchBackInfo=isNaN(e)?0:e,console.log("Bet input:",this.searchBackInfo)},s.onIDInputFieldEndEdit=function(t){var n=t.string,e=parseInt(n);this.searchBackInfo=isNaN(e)?0:e,console.log("ID input:",this.searchBackInfo)},s.onEnterBtnClick=function(){console.log("Enter button clicked, searchBackInfo:",this.searchBackInfo),this.closePanel()},s.onCloseBtnClick=function(){console.log("Close button clicked"),u.I.close(h.SearchPanel),this.closePanel()},s.closePanel=function(){this.node.active=!1,this.clearInputs()},s.clearInputs=function(){this.iDInputField&&(this.iDInputField.string="")},s.showPanel=function(){this.node.active=!0,this.clearInputs()},s.setInitialValues=function(t,n){void 0!==t&&this.iDInputField&&(this.iDInputField.string=t.toString(),this.searchBackInfo=t)},s.onDestroy=function(){this.removeEvents()},s.removeEvents=function(){this.iDInputField&&this.iDInputField.node.off(c.EventType.EDITING_DID_ENDED,this.onIDInputFieldEndEdit,this),this.enterBtn&&this.enterBtn.node.off(l.EventType.CLICK,this.onEnterBtnClick,this),this.closeUIBtn&&this.closeUIBtn.node.off(l.EventType.CLICK,this.onCloseBtnClick,this)},n}(a)).prototype,"iDInputField",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(D.prototype,"closeUIBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(D.prototype,"enterBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=D))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/SignalRManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./signalr.mjs_cjs=&original=.js","./HttpHelper.ts","./NetPort.ts","./JsonHelper.ts","./signalr.js"],(function(n){var t,e,r,o,c,i,s;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy},null,function(n){o=n.HttpHelper},function(n){c=n.NetPort},function(n){i=n.JsonHelper},function(n){s=n.default}],execute:function(){r._RF.push({},"a73a49OAA5LapraGv79JYdz","SignalRManager",void 0);var a=n("SignalRManager",function(){function n(){}return n.initialize=function(){var n=t(e().mark((function n(){var t,r,i;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isInitialized){n.next=3;break}return console.warn("SignalR 已经初始化"),n.abrupt("return",!0);case 3:return n.prev=3,t=o.getAuthToken(),r=c.signalRApi+"dice?access_token=",console.log("正在连接 SignalR:",r),i=new s.HubConnectionBuilder,this.connection=i.withUrl(r,{skipNegotiation:!1,transport:s.HttpTransportType.WebSockets,accessTokenFactory:function(){return t}}).configureLogging(s.LogLevel.Information).withAutomaticReconnect({nextRetryDelayInMilliseconds:function(n){return Math.min(1e3*Math.pow(2,n.previousRetryCount),3e4)}}).build(),this.setupEventListeners(),console.log("SignalR setupEventListeners"),n.next=13,this.connection.start();case 13:return this.isInitialized=!0,this.reconnectAttempts=0,console.log("SignalR 连接成功，连接ID：",this.connection.connectionId),n.abrupt("return",!0);case 19:return n.prev=19,n.t0=n.catch(3),console.error("SignalR 初始化失败：",n.t0),n.next=24,this.handleReconnection();case 24:return n.abrupt("return",!1);case 25:case"end":return n.stop()}}),n,this,[[3,19]])})));return function(){return n.apply(this,arguments)}}(),n.setupEventListeners=function(){var n=this;this.connection&&(this.connection.onclose((function(t){console.log("SignalR 连接断开",t),n.isInitialized=!1,n.handleReconnection()})),this.connection.onreconnecting((function(n){console.log("SignalR 正在重连...",n)})),this.connection.onreconnected((function(t){console.log("SignalR 重连成功，新连接ID：",t),n.isInitialized=!0,n.reconnectAttempts=0})),this.eventCallbacks.forEach((function(t,e){t.forEach((function(t){n.connection.on(e,t)}))})))},n.on=function(n,t){this.eventCallbacks.has(n)||this.eventCallbacks.set(n,[]),this.eventCallbacks.get(n).push(t),this.connection&&this.isInitialized&&this.connection.on(n,t)},n.onReceiveMessage=function(n){this.on("ReceiveMessage",n)},n.onPlayerPositionUpdated=function(n){this.on("PlayerPositionUpdated",n)},n.sendChatMessage=function(){var n=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.invoke("SendMessage",t);case 2:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),n.reportPosition=function(){var n=t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.invoke("ReportPosition",t,r);case 2:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),n.isConnected=function(){return this.isInitialized&&null!==this.connection&&this.connection.state===s.HubConnectionState.Connected},n.getConnectionState=function(){return this.connection?this.connection.state:"Disconnected"},n.getConnectionId=function(){return this.connection?this.connection.connectionId:null},n.disconnect=function(){var n=t(e().mark((function n(){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.connection){n.next=4;break}return n.next=3,this.connection.stop();case 3:this.connection=null;case 4:this.isInitialized=!1,this.eventCallbacks.clear(),console.log("SignalR 连接已断开");case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),n.handleReconnection=function(){var n=t(e().mark((function n(){var r,o=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.reconnectAttempts>=this.maxReconnectAttempts)){n.next=3;break}return console.error("达到最大重连次数，停止重连"),n.abrupt("return");case 3:this.reconnectAttempts++,r=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4),console.log("尝试第 "+this.reconnectAttempts+" 次重连，等待 "+r+"ms..."),setTimeout(t(e().mark((function n(){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.initialize();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.error("第 "+o.reconnectAttempts+" 次重连失败");case 8:case"end":return n.stop()}}),n,null,[[0,5]])}))),r);case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),n.getRooms=function(){var n=t(e().mark((function n(){var t;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("--start GetRooms connection:",null===this.connection),this.isConnected()){n.next=4;break}return n.next=4,this.initialize();case 4:return n.prev=4,n.next=7,this.invoke(c.GetRooms);case 7:if(t=n.sent,console.log("--Back GetRooms:",i.ToJson(t)),0!=t.errorCode){n.next=14;break}return console.log("--end GetRooms success, count:",i.ToJson(t.data)),n.abrupt("return",t.data);case 14:return console.warn("GetRooms failed:",t.errorCode),n.abrupt("return",null);case 16:n.next=22;break;case 18:return n.prev=18,n.t0=n.catch(4),console.error("获取房间失败: "+n.t0),n.abrupt("return",null);case 22:case"end":return n.stop()}}),n,this,[[4,18]])})));return function(){return n.apply(this,arguments)}}(),n.createRoom=function(){var n=t(e().mark((function n(t,r,o){var i,s;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={name:t,bet:r,password:o},n.prev=1,n.next=4,this.invoke(c.CreateRoom,i);case 4:if(s=n.sent,console.log("CreateRoom result:",s),0!=s.errorCode){n.next=10;break}return n.abrupt("return",s.data);case 10:return n.abrupt("return",null);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(1),console.error("创建房间失败:",n.t0),n.abrupt("return",null);case 17:case"end":return n.stop()}}),n,this,[[1,13]])})));return function(t,e,r){return n.apply(this,arguments)}}(),n.enterRoom=function(){var n=t(e().mark((function n(t,r){var o,i;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.invoke(c.EnterRoom,t,r);case 3:if(0!=(o=n.sent).errorCode){n.next=8;break}return n.abrupt("return",o.data);case 8:return i="加入失败 "+o.errorCode+" roomId "+t,console.log(i),n.abrupt("return",i);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),console.error("进入房间失败:",n.t0),n.abrupt("return","连接错误");case 17:case"end":return n.stop()}}),n,this,[[0,13]])})));return function(t,e){return n.apply(this,arguments)}}(),n.exitRoom=function(){var n=t(e().mark((function n(){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.invoke(c.ExitRoom);case 3:return console.log("退出房间成功"),n.abrupt("return",!0);case 7:return n.prev=7,n.t0=n.catch(0),console.error("退出房间失败:",n.t0),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),n.chosePoint=function(){var n=t(e().mark((function n(t){var r;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.invoke(c.ChosePoint,t);case 3:return r=n.sent,n.abrupt("return",0==r.errorCode);case 7:return n.prev=7,n.t0=n.catch(0),console.error("选择点数失败:",n.t0),n.abrupt("return",!1);case 11:case"end":return n.stop()}}),n,this,[[0,7]])})));return function(t){return n.apply(this,arguments)}}(),n.getGold=function(){var n=t(e().mark((function n(){var t;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.invoke(c.GetGold);case 3:if(0!=(t=n.sent).errorCode){n.next=8;break}return n.abrupt("return",t.data);case 8:return n.abrupt("return",0);case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),console.error("获取金币失败:",n.t0),n.abrupt("return",0);case 15:case"end":return n.stop()}}),n,this,[[0,11]])})));return function(){return n.apply(this,arguments)}}(),n.registerServerMessages=function(){this.connection&&(this.on(c.EnterRoom,(function(n,t){console.log("Player entered room:",n,t)})),this.on(c.ExitRoom,(function(n,t){console.log("Player exited room:",n,t)})),this.on(c.OnCountdown,(function(n,t){console.log("Countdown:",n,t)})),this.on(c.OnComputing,(function(n){console.log("Computing started:",n)})),this.on(c.OnSettled,(function(n,t){console.log("Settlement:",n,t)})),this.on(c.OnBet,(function(n,t){console.log("Bet placed:",n,t)})),this.on(c.OnError,(function(n){console.error("Game error:",n)})))},n.invoke=function(){var n=t(e().mark((function n(t){var r,o,c,i,s=arguments;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isConnected()){n.next=2;break}throw new Error("SignalR connection not ready");case 2:for(n.prev=2,o=s.length,c=new Array(o>1?o-1:0),i=1;i<o;i++)c[i-1]=s[i];return n.next=6,(r=this.connection).invoke.apply(r,[t].concat(c));case 6:return n.abrupt("return",n.sent);case 9:throw n.prev=9,n.t0=n.catch(2),console.error("调用方法 "+t+" 失败：",n.t0),n.t0;case 13:case"end":return n.stop()}}),n,this,[[2,9]])})));return function(t){return n.apply(this,arguments)}}(),n}());a.connection=null,a.isInitialized=!1,a.reconnectAttempts=0,a.maxReconnectAttempts=5,a.eventCallbacks=new Map,r._RF.pop()}}}));

System.register("chunks:///_virtual/StorageUtil.ts",["cc"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy,r=t.sys}],execute:function(){e._RF.push({},"53190HwjVpPFpZMiEwIc0du","StorageUtil",void 0);t("StorageUtil",function(){function t(){}return t.setItem=function(t,e){try{return r.localStorage.setItem(t,e),!0}catch(e){return console.error("设置 localStorage 项 '"+t+"' 失败:",e),!1}},t.getItem=function(t){try{return r.localStorage.getItem(t)}catch(e){return console.error("获取 localStorage 项 '"+t+"' 失败:",e),null}},t.setNumber=function(t,e){return this.setItem(t,e.toString())},t.getNumber=function(t,e){void 0===e&&(e=0);var r=this.getItem(t);if(null===r)return e;var n=parseFloat(r);return isNaN(n)?e:n},t.setBoolean=function(t,e){return this.setItem(t,e?"true":"false")},t.getBoolean=function(t,e){void 0===e&&(e=!1);var r=this.getItem(t);return null===r?e:"true"===r},t.setObject=function(t,e){try{var r=JSON.stringify(e);return this.setItem(t,r)}catch(e){return console.error("序列化存储对象失败 '"+t+"':",e),!1}},t.getObject=function(t,e){var r=this.getItem(t);if(null===r)return e;try{return JSON.parse(r)}catch(r){return console.error("解析存储对象失败 '"+t+"':",r),e}},t.removeItem=function(t){try{r.localStorage.removeItem(t)}catch(e){console.error("移除 localStorage 项 '"+t+"' 失败:",e)}},t.hasItem=function(t){return null!==this.getItem(t)},t.clear=function(){try{r.localStorage.clear()}catch(t){console.error("清空 localStorage 失败:",t)}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIManager.ts"],(function(e){var t,n,i,o,r,s,a,c,u,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,u=e.Label},function(e){l=e.UIBase},function(e){p=e.UIManager}],execute:function(){var f,h,d,m,T,v;a._RF.push({},"88729YAAd9PV5fwa9d8XsCo","TipPanel",void 0);var y=c.ccclass,b=c.property;e("TipPanel",(f=y("TipPanel"),h=b(u),f(((v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,i(t,"infoLabel",T,o(t)),t.timer=0,t}n(t,e),t.showTips=function(){var e=r(s().mark((function e(n,i){var o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=1.8),e.prev=1,e.next=4,p.I.openNoCache("ui/TipPanel",n,i);case 4:(o=e.sent)&&(this.activeTips.add(o),(r=o.getComponent(t))&&r.setAutoDestroyTimer(i)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("显示提示失败:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),t.removeTipReference=function(e){this.activeTips.delete(e)},t.closeAllTips=function(){this.activeTips.forEach((function(e){if(e&&e.isValid){var n=e.getComponent(t);n&&n.close()}})),this.activeTips.clear()};var a=t.prototype;return a.onOpen=function(e,t){this.show(e,t)},a.onClose=function(){this.cleanup(),t.removeTipReference(this.node)},a.show=function(e,t){this.infoLabel&&(this.infoLabel.string=e),this.setAutoCloseTimer(t)},a.setAutoCloseTimer=function(e){var t=this;this.cleanup(),this.timer=setTimeout((function(){t.close()}),1e3*e)},a.setAutoDestroyTimer=function(e){var n=this;setTimeout((function(){n.node&&n.node.isValid&&(n.cleanup(),t.removeTipReference(n.node),n.node.parent&&n.node.destroy())}),1e3*(e+.5))},a.close=function(){this.cleanup(),this.node&&this.node.isValid&&(t.removeTipReference(this.node),this.node.parent&&this.node.removeFromParent(),this.node.destroy())},a.closeImmediately=function(){this.close()},a.cleanup=function(){this.timer&&(clearTimeout(this.timer),this.timer=0)},a.onDestroy=function(){this.cleanup(),t.removeTipReference(this.node),e.prototype.onDestroy&&e.prototype.onDestroy.call(this)},a.updateInfo=function(e){this.infoLabel&&(this.infoLabel.string=e)},a.resetTimer=function(e){this.setAutoCloseTimer(e)},t}(l)).activeTips=new Set,T=t((m=v).prototype,"infoLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/TopBarMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameMain.ts","./LanguageCore.ts"],(function(t){var n,i,e,o,s,c,a,l,u,r,h,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,a=t.Label,l=t.Button,u=t.Node,r=t.Component},function(t){h=t.GameMain},function(t){p=t.LanguageCore}],execute:function(){var C,y,f,g,B,b,k,d,v,m,L,S,T,I,M,P,E,K,w,z,D;s._RF.push({},"31a32tOiv5Ec4RysYjKW+Lb","TopBarMain",void 0);var q=c.ccclass,N=c.property;t("TopBarMain",(C=q("TopBarMain"),y=N({type:a}),f=N({type:l}),g=N({type:l}),B=N({type:u}),b=N({type:l}),k=N({type:l}),d=N({type:l}),v=N({type:l}),m=N({type:a}),C((T=n((S=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=t.call.apply(t,[this].concat(s))||this,e(n,"coinsCount",T,o(n)),e(n,"settngBtn",I,o(n)),e(n,"backBtn",M,o(n)),e(n,"settingPanelNode",P,o(n)),e(n,"closeSettingBtn",E,o(n)),e(n,"quickBtn",K,o(n)),e(n,"musicBtn",w,o(n)),e(n,"historyBtn",z,o(n)),e(n,"musicLabel",D,o(n)),n}i(n,t);var s=n.prototype;return s.update=function(t){},s.start=function(){this.initButtons(),this.onCloseSettingClick(),this.updateMusicLabel()},s.updateMusicLabel=function(){var t=h.instance.savedPlayerData.musinOn?"106":"120";this.musicLabel.string=p.getLang(t)},s.initButtons=function(){this.settngBtn&&this.settngBtn.node.on(l.EventType.CLICK,this.onSettingClick,this),this.closeSettingBtn&&this.closeSettingBtn.node.on(l.EventType.CLICK,this.onCloseSettingClick,this),this.backBtn&&this.backBtn.node.on(l.EventType.CLICK,this.onBackClick,this),this.quickBtn&&this.quickBtn.node.on(l.EventType.CLICK,this.onQuickClick,this),this.musicBtn&&this.musicBtn.node.on(l.EventType.CLICK,this.onMusicClick,this),this.historyBtn&&this.historyBtn.node.on(l.EventType.CLICK,this.onHistoryClick,this)},s.onSettingClick=function(){this.showSettingPanel()},s.onCloseSettingClick=function(){this.settingPanelNode.active=!1},s.onBackClick=function(){console.log("Back button clicked")},s.onQuickClick=function(){console.log("Quick button clicked")},s.onMusicClick=function(){console.log("Music button clicked"),h.instance.savedPlayerData.musinOn=!h.instance.savedPlayerData.musinOn,h.instance.doSavedPlayerData(),this.updateMusicLabel()},s.onHistoryClick=function(){console.log("History button clicked")},s.showSettingPanel=function(){this.settingPanelNode&&(this.settingPanelNode.active=!0)},s.setCoinsCount=function(t){this.coinsCount&&(this.coinsCount.string=h.instance.savedPlayerData.lastCurrency+":"+t)},s.updateCoinsCount=function(t){if(this.coinsCount){var n=parseInt(this.coinsCount.string||"0");this.setCoinsCount(n+t)}},s.onDestroy=function(){this.settngBtn&&this.settngBtn.node.off(l.EventType.CLICK,this.onSettingClick,this),this.backBtn&&this.backBtn.node.off(l.EventType.CLICK,this.onBackClick,this),this.quickBtn&&this.quickBtn.node.off(l.EventType.CLICK,this.onQuickClick,this),this.musicBtn&&this.musicBtn.node.off(l.EventType.CLICK,this.onMusicClick,this),this.historyBtn&&this.historyBtn.node.off(l.EventType.CLICK,this.onHistoryClick,this),this.closeSettingBtn&&this.closeSettingBtn.node.off(l.EventType.CLICK,this.onCloseSettingClick,this)},n}(r)).prototype,"coinsCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(S.prototype,"settngBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(S.prototype,"backBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(S.prototype,"settingPanelNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(S.prototype,"closeSettingBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(S.prototype,"quickBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(S.prototype,"musicBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"historyBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(S.prototype,"musicLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=S))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,t,r;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,r=e.Component}],execute:function(){var c;o._RF.push({},"3994cWlor1HQZ08Wr3G6moi","UIBase",void 0);var s=t.ccclass;e("UIBase",s("UIBase")(c=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.onOpen=function(){},t.onClose=function(){this.node.active=!1},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIDefine.ts",["cc"],(function(e){var n,i;return{setters:[function(e){n=e.cclegacy,i=e._decorator}],execute:function(){var c,t;n._RF.push({},"7c848uAYiJIxqk2Utlywc/3","UIDefine",void 0);var o=i.ccclass;i.property,e("UIDefine",o("UIDefine")(((t=function(){}).SearchPanel="ui/SearchPanel",t.LobbyPanel="ui/LobbyPanel",t.LoginPanel="ui/LoginPanel",t.CreatRoomView="ui/CreatRoomView",t.SerchContentView="ui/SerchContentView",c=t))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts"],(function(e){var t,n,r,o,i,a,u,s,c,h;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,n=e.createClass,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,a=e._decorator,u=e.resources,s=e.Prefab,c=e.instantiate},function(e){h=e.UIBase}],execute:function(){var l,f;i._RF.push({},"1b5683/FMhLB4FBA65G2HGF","UIManager",void 0);var p=a.ccclass;e("UIManager",p("UIManager")(((f=function(){function e(){this.uiRoot=null,this.uiCache=new Map}var i=e.prototype;return i.init=function(e){this.uiRoot=e},i.openNoCache=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise((function(n,o){u.load(e,s,(function(i,a){var u;if(i)return console.error("加载UI失败: "+e,i),void o(i);var s=c(a);t.uiRoot.addChild(s),null==(u=s.getComponent(h))||u.onOpen.apply(u,r),n(s)}))}))},i.open=function(){var e=r(o().mark((function e(t){var n,r,i,a,l,f=this,p=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=p.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=p[i];if(this.uiRoot){e.next=4;break}return console.error("UIRoot 未初始化"),e.abrupt("return",null);case 4:if(!this.uiCache.has(t)){e.next=9;break}return(l=this.uiCache.get(t)).active=!0,null==(a=l.getComponent(h))||a.onOpen.apply(a,r),e.abrupt("return",l);case 9:return e.abrupt("return",new Promise((function(e,n){u.load(t,s,(function(o,i){var a;if(o)return console.error("加载UI失败: "+t,o),void n(o);var u=c(i);f.uiRoot.addChild(u),f.uiCache.set(t,u),null==(a=u.getComponent(h))||a.onOpen.apply(a,r),e(u)}))})));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.close=function(e){var t;this.uiCache.has(e)&&(null==(t=this.uiCache.get(e).getComponent(h))||t.onClose())},i.destroy=function(e){this.uiCache.has(e)&&(this.uiCache.get(e).destroy(),this.uiCache.delete(e))},i.destroyUI=function(e){var t=this.getKeyByNode(e);this.destroy(t)},i.getKeyByNode=function(e){for(var n,r=t(this.uiCache.entries());!(n=r()).done;){var o=n.value,i=o[0];if(o[1]===e)return i}},i.removeByNode=function(e){for(var n,r=t(this.uiCache.entries());!(n=r()).done;){var o=n.value,i=o[0];if(o[1]===e)return this.uiCache.delete(i),!0}return!1},n(e,null,[{key:"I",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,l=f))||l);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});