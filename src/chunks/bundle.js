System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///_virtual/cjs-loader.mjs",[],(function(e){return{execute:function(){e("default",new(function(){function e(){this._registry={},this._moduleCache={}}var r=e.prototype;return r.define=function(e,r,t){this._registry[e]={factory:r,resolveMap:t}},r.require=function(e){return this._require(e)},r.throwInvalidWrapper=function(e,r){throw new Error("Module '"+e+"' imported from '"+r+"' is expected be an ESM-wrapped CommonJS module but it doesn't.")},r._require=function(e,r){var t=this._moduleCache[e];if(t)return t.exports;var o={id:e,exports:{}};return this._moduleCache[e]=o,this._tryModuleLoad(o,e),o.exports},r._resolve=function(e,r){return this._resolveFromInfos(e,r)||this._throwUnresolved(e,r)},r._resolveFromInfos=function(e,r){var t,o;return e in cjsInfos?e:r&&null!=(t=null==(o=cjsInfos[r])?void 0:o.resolveCache[e])?t:void 0},r._tryModuleLoad=function(e,r){var t=!0;try{this._load(e,r),t=!1}finally{t&&delete this._moduleCache[r]}},r._load=function(e,r){var t=this._loadWrapper(r),o=t.factory,n=t.resolveMap,i=this._createRequire(e),u=n?this._createRequireWithResolveMap("function"==typeof n?n():n,i):i;o(e.exports,u,e)},r._loadWrapper=function(e){return e in this._registry?this._registry[e]:this._loadHostProvidedModules(e)},r._loadHostProvidedModules=function(e){return{factory:function(r,t,o){if("undefined"==typeof require)throw new Error("Current environment does not provide a require() for requiring '"+e+"'.");try{o.exports=require(e)}catch(r){throw new Error("Exception thrown when calling host defined require('"+e+"').",{cause:r})}}}},r._createRequire=function(e){var r=this;return function(t){return r._require(t,e)}},r._createRequireWithResolveMap=function(e,r){return function(t){var o=e[t];if(o)return r(o);throw new Error("Unresolved specifier "+t)}},r._throwUnresolved=function(e,r){throw new Error("Unable to resolve "+e+" from "+parent+".")},e}()))}}}));

System.register("chunks:///_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function r(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?r(c):Promise.resolve(c).then(n,o)}function e(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function n(r,e){return(n=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t}))(r,e)}function o(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function u(t){var r=a(t,"string");return"symbol"==typeof r?r:String(r)}t({applyDecoratedDescriptor:function(t,r,e,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=e.slice().reverse().reduce((function(e,n){return n(t,r,e)||e}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,r,i),i=null);return i},arrayLikeToArray:i,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function u(t){r(a,o,i,u,c,"next",t)}function c(t){r(a,o,i,u,c,"throw",t)}u(void 0)}))}},createClass:function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},createForOfIteratorHelperLoose:function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=o(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},inheritsLoose:function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r)},initializerDefineProperty:function(t,r,e,n){if(!e)return;Object.defineProperty(t,r,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var r,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(r){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:P(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};f(w,u,(function(){return this}));var L=Object.getPrototypeOf,O=L&&L(L(z([])));O&&O!==n&&o.call(O,u)&&(w=O);var j=b.prototype=g.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function e(n,i,a,u){var c=h(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,a,u)}),(function(t){e("throw",t,a,u)})):r.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,u)}))}u(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new r((function(r,n){e(t,o,r,n)}))}return n=n?n.then(i,i):i()}})}function P(t,e,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=_(u,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,e,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function _(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function k(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function z(t){if(t||""===t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=b,i(j,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},x(E.prototype),f(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(j),f(j,l,"Generator"),f(j,u,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=z,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),k(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;k(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},e},setPrototypeOf:n,toPrimitive:a,toPropertyKey:u,unsupportedIterableToArray:o})}}}));

System.register("chunks:///_virtual/signalr.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,s=Object.create(i.prototype),a=new R(r||[]);return o(s,"_invoke",{value:E(t,n,a)}),s}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var f="suspendedStart",g="executing",d="completed",_={};function v(){}function b(){}function m(){}var y={};l(y,a,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(D([])));k&&k!==n&&r.call(k,a)&&(y=k);var S=m.prototype=v.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,s,a){var c=p(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,n,r){var o=f;return function(i,s){if(o===g)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?d:"suspendedYield",u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=d,r.method="throw",r.arg=u.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return b.prototype=m,o(S,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:b,configurable:!0}),b.displayName=l(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},C(x.prototype),l(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new x(h(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}function s(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){s(i,r,o,a,c,"next",t)}function c(t){s(i,r,o,a,c,"throw",t)}a(void 0)}))}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?i:String(i)),r)}var o,i}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(){return(l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,d(t,e)}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return f(t,arguments,_(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,t)})(t)}function f(t,e,n){return(f=g()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&d(o,n.prototype),o}).apply(null,arguments)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t("default",void 0);var v=t("__cjsMetaURL",e.meta.url);n.define(v,(function(e,n,o,s,c){var f,g;f=self,g=function(){return function(){var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};t.r(e),t.d(e,{AbortError:function(){return g},DefaultHttpClient:function(){return W},HttpClient:function(){return w},HttpError:function(){return c},HttpResponse:function(){return y},HttpTransportType:function(){return Y},HubConnection:function(){return G},HubConnectionBuilder:function(){return ht},HubConnectionState:function(){return z},JsonHubProtocol:function(){return ut},LogLevel:function(){return o},MessageType:function(){return U},NullLogger:function(){return k},Subject:function(){return X},TimeoutError:function(){return f},TransferFormat:function(){return Z},VERSION:function(){return S}});var o,s,c=function(t){function e(n,r){var o,i=(this instanceof e?this.constructor:void 0).prototype;return(o=t.call(this,n+": Status code '"+r+"'")||this).statusCode=r,o.__proto__=i,o}return h(e,t),e}(p(Error)),f=function(t){function e(n){var r;void 0===n&&(n="A timeout occurred.");var o=(this instanceof e?this.constructor:void 0).prototype;return(r=t.call(this,n)||this).__proto__=o,r}return h(e,t),e}(p(Error)),g=function(t){function e(n){var r;void 0===n&&(n="An abort occurred.");var o=(this instanceof e?this.constructor:void 0).prototype;return(r=t.call(this,n)||this).__proto__=o,r}return h(e,t),e}(p(Error)),d=function(t){function e(n,r){var o,i=(this instanceof e?this.constructor:void 0).prototype;return(o=t.call(this,n)||this).transport=r,o.errorType="UnsupportedTransportError",o.__proto__=i,o}return h(e,t),e}(p(Error)),_=function(t){function e(n,r){var o,i=(this instanceof e?this.constructor:void 0).prototype;return(o=t.call(this,n)||this).transport=r,o.errorType="DisabledTransportError",o.__proto__=i,o}return h(e,t),e}(p(Error)),v=function(t){function e(n,r){var o,i=(this instanceof e?this.constructor:void 0).prototype;return(o=t.call(this,n)||this).transport=r,o.errorType="FailedToStartTransportError",o.__proto__=i,o}return h(e,t),e}(p(Error)),b=function(t){function e(n){var r,o=(this instanceof e?this.constructor:void 0).prototype;return(r=t.call(this,n)||this).errorType="FailedToNegotiateWithServerError",r.__proto__=o,r}return h(e,t),e}(p(Error)),m=function(t){function e(n,r){var o,i=(this instanceof e?this.constructor:void 0).prototype;return(o=t.call(this,n)||this).innerErrors=r,o.__proto__=i,o}return h(e,t),e}(p(Error)),y=function(t,e,n){this.statusCode=t,this.statusText=e,this.content=n},w=function(){function t(){}var e=t.prototype;return e.get=function(t,e){return this.send(l({},e,{method:"GET",url:t}))},e.post=function(t,e){return this.send(l({},e,{method:"POST",url:t}))},e.delete=function(t,e){return this.send(l({},e,{method:"DELETE",url:t}))},e.getCookieString=function(t){return""},t}();(s=o||(o={}))[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Information=2]="Information",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.None=6]="None";var k=function(){function t(){}return t.prototype.log=function(t,e){},t}();k.instance=new k;var S="7.0.5",C=function(){function t(){}return t.isRequired=function(t,e){if(null==t)throw new Error("The '"+e+"' argument is required.")},t.isNotEmpty=function(t,e){if(!t||t.match(/^\s*$/))throw new Error("The '"+e+"' argument should not be empty.")},t.isIn=function(t,e,n){if(!(t in e))throw new Error("Unknown "+n+" value: "+t+".")},t}(),x=function(){function t(){}return u(t,null,[{key:"isBrowser",get:function(){return"object"==typeof window&&"object"==typeof window.document}},{key:"isWebWorker",get:function(){return"object"==typeof self&&"importScripts"in self}},{key:"isReactNative",get:function(){return"object"==typeof window&&void 0===window.document}},{key:"isNode",get:function(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}]),t}();function E(t,e){var n="";return T(t)?(n="Binary data of length "+t.byteLength,e&&(n+=". Content: '"+function(t){var e=new Uint8Array(t),n="";return e.forEach((function(t){n+="0x"+(t<16?"0":"")+t.toString(16)+" "})),n.substr(0,n.length-1)}(t)+"'")):"string"==typeof t&&(n="String data of length "+t.length,e&&(n+=". Content: '"+t+"'")),n}function T(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function I(t,e,n,r,o,i){return P.apply(this,arguments)}function P(){return(P=a(i().mark((function t(e,n,r,s,a,c){var u,h,p,f,g,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={},h=j(),p=h[0],f=h[1],u[p]=f,e.log(o.Trace,"("+n+" transport) sending data. "+E(a,c.logMessageContent)+"."),g=T(a)?"arraybuffer":"text",t.next=7,r.post(s,{content:a,headers:l({},u,c.headers),responseType:g,timeout:c.timeout,withCredentials:c.withCredentials});case 7:d=t.sent,e.log(o.Trace,"("+n+" transport) request complete. Response status: "+d.statusCode+".");case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=function(){function t(t,e){this._subject=t,this._observer=e}return t.prototype.dispose=function(){var t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch((function(t){}))},t}(),D=function(){function t(t){this._minLevel=t,this.out=console}return t.prototype.log=function(t,e){if(t>=this._minLevel){var n="["+(new Date).toISOString()+"] "+o[t]+": "+e;switch(t){case o.Critical:case o.Error:this.out.error(n);break;case o.Warning:this.out.warn(n);break;case o.Information:this.out.info(n);break;default:this.out.log(n)}}},t}();function j(){var t,e,n,r,o,i,s="X-SignalR-User-Agent";return x.isNode&&(s="User-Agent"),[s,(t=S,e=O(),n=x.isNode?"NodeJS":"Browser",r=L(),o="Microsoft SignalR/",i=t.split("."),o+=i[0]+"."+i[1],o+=" ("+t+"; ",o+=e&&""!==e?e+"; ":"Unknown OS; ",o+=""+n,o+=r?"; "+r:"; Unknown Runtime Version",o+=")")]}function O(){if(!x.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function L(){if(x.isNode)return process.versions.node}function H(t){return t.stack?t.stack:t.message?t.message:""+t}var A=function(e){function r(r){var o;if((o=e.call(this)||this)._logger=r,"undefined"==typeof fetch){var i=n;o._jar=new(i("tough-cookie").CookieJar),o._fetchType=i("node-fetch"),o._fetchType=i("fetch-cookie")(o._fetchType,o._jar)}else o._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("could not find global")}());if("undefined"==typeof AbortController){var s=n;o._abortControllerType=s("abort-controller")}else o._abortControllerType=AbortController;return o}h(r,e);var s=r.prototype;return s.send=function(){var t=a(i().mark((function t(e){var n,r,s,a,u,h,p,d,_=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.abortSignal||!e.abortSignal.aborted){t.next=2;break}throw new g;case 2:if(e.method){t.next=4;break}throw new Error("No method defined.");case 4:if(e.url){t.next=6;break}throw new Error("No url defined.");case 6:return n=new this._abortControllerType,e.abortSignal&&(e.abortSignal.onabort=function(){n.abort(),r=new g}),s=null,e.timeout&&(a=e.timeout,s=setTimeout((function(){n.abort(),_._logger.log(o.Warning,"Timeout from HTTP request."),r=new f}),a)),""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},T(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8"),t.prev=12,t.next=15,this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:l({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:n.signal});case 15:u=t.sent,t.next=24;break;case 18:if(t.prev=18,t.t0=t.catch(12),!r){t.next=22;break}throw r;case 22:throw this._logger.log(o.Warning,"Error from HTTP request. "+t.t0+"."),t.t0;case 24:return t.prev=24,s&&clearTimeout(s),e.abortSignal&&(e.abortSignal.onabort=null),t.finish(24);case 28:if(u.ok){t.next=33;break}return t.next=31,N(u,"text");case 31:throw h=t.sent,new c(h||u.statusText,u.status);case 33:return p=N(u,e.responseType),t.next=36,p;case 36:return d=t.sent,t.abrupt("return",new y(u.status,u.statusText,d));case 38:case"end":return t.stop()}}),t,this,[[12,18,24,28]])})));return function(e){return t.apply(this,arguments)}}(),s.getCookieString=function(t){var e="";return x.isNode&&this._jar&&this._jar.getCookies(t,(function(t,n){return e=n.join("; ")})),e},r}(w);function N(t,e){var n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error(e+" is not supported.");default:n=t.text()}return n}var M=function(t){function e(e){var n;return(n=t.call(this)||this)._logger=e,n}return h(e,t),e.prototype.send=function(t){var e=this;return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new g):t.method?t.url?new Promise((function(n,r){var i=new XMLHttpRequest;i.open(t.method,t.url,!0),i.withCredentials=void 0===t.withCredentials||t.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(T(t.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));var s=t.headers;s&&Object.keys(s).forEach((function(t){i.setRequestHeader(t,s[t])})),t.responseType&&(i.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=function(){i.abort(),r(new g)}),t.timeout&&(i.timeout=t.timeout),i.onload=function(){t.abortSignal&&(t.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new y(i.status,i.statusText,i.response||i.responseText)):r(new c(i.response||i.responseText||i.statusText,i.status))},i.onerror=function(){e._logger.log(o.Warning,"Error from HTTP request. "+i.status+": "+i.statusText+"."),r(new c(i.statusText,i.status))},i.ontimeout=function(){e._logger.log(o.Warning,"Timeout from HTTP request."),r(new f)},i.send(t.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},e}(w),W=function(t){function e(e){var n;if(n=t.call(this)||this,"undefined"!=typeof fetch||x.isNode)n._httpClient=new A(e);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");n._httpClient=new M(e)}return n}h(e,t);var n=e.prototype;return n.send=function(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new g):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},n.getCookieString=function(t){return this._httpClient.getCookieString(t)},e}(w),F=function(){function t(){}return t.write=function(e){return""+e+t.RecordSeparator},t.parse=function(e){if(e[e.length-1]!==t.RecordSeparator)throw new Error("Message is incomplete.");var n=e.split(t.RecordSeparator);return n.pop(),n},t}();F.RecordSeparatorCode=30,F.RecordSeparator=String.fromCharCode(F.RecordSeparatorCode);var U,q,B=function(){function t(){}var e=t.prototype;return e.writeHandshakeRequest=function(t){return F.write(JSON.stringify(t))},e.parseHandshakeResponse=function(t){var e,n;if(T(t)){var r=new Uint8Array(t),o=r.indexOf(F.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");var i=o+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(r.slice(0,i))),n=r.byteLength>i?r.slice(i).buffer:null}else{var s=t,a=s.indexOf(F.RecordSeparator);if(-1===a)throw new Error("Message is incomplete.");var c=a+1;e=s.substring(0,c),n=s.length>c?s.substring(c):null}var u=F.parse(e),l=JSON.parse(u[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[n,l]},t}();(q=U||(U={}))[q.Invocation=1]="Invocation",q[q.StreamItem=2]="StreamItem",q[q.Completion=3]="Completion",q[q.StreamInvocation=4]="StreamInvocation",q[q.CancelInvocation=5]="CancelInvocation",q[q.Ping=6]="Ping",q[q.Close=7]="Close";var z,K,X=function(){function t(){this.observers=[]}var e=t.prototype;return e.next=function(t){for(var e,n=r(this.observers);!(e=n()).done;)e.value.next(t)},e.error=function(t){for(var e,n=r(this.observers);!(e=n()).done;){var o=e.value;o.error&&o.error(t)}},e.complete=function(){for(var t,e=r(this.observers);!(t=e()).done;){var n=t.value;n.complete&&n.complete()}},e.subscribe=function(t){return this.observers.push(t),new R(this,t)},t}();(K=z||(z={})).Disconnected="Disconnected",K.Connecting="Connecting",K.Connected="Connected",K.Disconnecting="Disconnecting",K.Reconnecting="Reconnecting";var G=function(){function t(t,e,n,r){var i=this;this._nextKeepAlive=0,this._freezeEventListener=function(){i._logger.log(o.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},C.isRequired(t,"connection"),C.isRequired(e,"logger"),C.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=e,this._protocol=n,this.connection=t,this._reconnectPolicy=r,this._handshakeProtocol=new B,this.connection.onreceive=function(t){return i._processIncomingData(t)},this.connection.onclose=function(t){return i._connectionClosed(t)},this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=z.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:U.Ping})}t.create=function(e,n,r,o){return new t(e,n,r,o)};var e=t.prototype;return e.start=function(){return this._startPromise=this._startWithStateTransitions(),this._startPromise},e._startWithStateTransitions=function(){var t=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._connectionState===z.Disconnected){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state.")));case 2:return this._connectionState=z.Connecting,this._logger.log(o.Debug,"Starting HubConnection."),t.prev=4,t.next=7,this._startInternal();case 7:x.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=z.Connected,this._connectionStarted=!0,this._logger.log(o.Debug,"HubConnection connected successfully."),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(4),this._connectionState=z.Disconnected,this._logger.log(o.Debug,"HubConnection failed to start successfully because of error '"+t.t0+"'."),t.abrupt("return",Promise.reject(t.t0));case 18:case"end":return t.stop()}}),t,this,[[4,13]])})));return function(){return t.apply(this,arguments)}}(),e._startInternal=function(){var t=a(i().mark((function t(){var e,n,r=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1,e=new Promise((function(t,e){r._handshakeResolver=t,r._handshakeRejecter=e})),t.next=5,this.connection.start(this._protocol.transferFormat);case 5:return t.prev=5,n={protocol:this._protocol.name,version:this._protocol.version},this._logger.log(o.Debug,"Sending handshake request."),t.next=10,this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n));case 10:return this._logger.log(o.Information,"Using HubProtocol '"+this._protocol.name+"'."),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),t.next=16,e;case 16:if(!this._stopDuringStartError){t.next=18;break}throw this._stopDuringStartError;case 18:if(this.connection.features.inherentKeepAlive){t.next=21;break}return t.next=21,this._sendMessage(this._cachedPingMessage);case 21:t.next=31;break;case 23:return t.prev=23,t.t0=t.catch(5),this._logger.log(o.Debug,"Hub handshake failed with error '"+t.t0+"' during start(). Stopping HubConnection."),this._cleanupTimeout(),this._cleanupPingTimer(),t.next=30,this.connection.stop(t.t0);case 30:throw t.t0;case 31:case"end":return t.stop()}}),t,this,[[5,23]])})));return function(){return t.apply(this,arguments)}}(),e.stop=function(){var t=a(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._startPromise,this._stopPromise=this._stopInternal(),t.next=4,this._stopPromise;case 4:return t.prev=4,t.next=7,e;case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(4);case 11:case"end":return t.stop()}}),t,this,[[4,9]])})));return function(){return t.apply(this,arguments)}}(),e._stopInternal=function(t){return this._connectionState===z.Disconnected?(this._logger.log(o.Debug,"Call to HubConnection.stop("+t+") ignored because it is already in the disconnected state."),Promise.resolve()):this._connectionState===z.Disconnecting?(this._logger.log(o.Debug,"Call to HttpConnection.stop("+t+") ignored because the connection is already in the disconnecting state."),this._stopPromise):(this._connectionState=z.Disconnecting,this._logger.log(o.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(o.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new g("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))},e.stream=function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,s=this._replaceStreamingParams(r),a=s[0],c=s[1],u=this._createStreamInvocation(t,r,c),l=new X;return l.cancelCallback=function(){var t=e._createCancelInvocation(u.invocationId);return delete e._callbacks[u.invocationId],i.then((function(){return e._sendWithProtocol(t)}))},this._callbacks[u.invocationId]=function(t,e){e?l.error(e):t&&(t.type===U.Completion?t.error?l.error(new Error(t.error)):l.complete():l.next(t.item))},i=this._sendWithProtocol(u).catch((function(t){l.error(t),delete e._callbacks[u.invocationId]})),this._launchStreams(a,i),l},e._sendMessage=function(t){return this._resetKeepAliveInterval(),this.connection.send(t)},e._sendWithProtocol=function(t){return this._sendMessage(this._protocol.writeMessage(t))},e.send=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=this._replaceStreamingParams(n),i=o[0],s=o[1],a=this._sendWithProtocol(this._createInvocation(t,n,!0,s));return this._launchStreams(i,a),a},e.invoke=function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this._replaceStreamingParams(r),s=i[0],a=i[1],c=this._createInvocation(t,r,!1,a),u=new Promise((function(t,n){e._callbacks[c.invocationId]=function(e,r){r?n(r):e&&(e.type===U.Completion?e.error?n(new Error(e.error)):t(e.result):n(new Error("Unexpected message type: "+e.type)))};var r=e._sendWithProtocol(c).catch((function(t){n(t),delete e._callbacks[c.invocationId]}));e._launchStreams(s,r)}));return u},e.on=function(t,e){t&&e&&(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),-1===this._methods[t].indexOf(e)&&this._methods[t].push(e))},e.off=function(t,e){if(t){t=t.toLowerCase();var n=this._methods[t];if(n)if(e){var r=n.indexOf(e);-1!==r&&(n.splice(r,1),0===n.length&&delete this._methods[t])}else delete this._methods[t]}},e.onclose=function(t){t&&this._closedCallbacks.push(t)},e.onreconnecting=function(t){t&&this._reconnectingCallbacks.push(t)},e.onreconnected=function(t){t&&this._reconnectedCallbacks.push(t)},e._processIncomingData=function(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t)for(var e,n=r(this._protocol.parseMessages(t,this._logger));!(e=n()).done;){var i=e.value;switch(i.type){case U.Invocation:this._invokeClientMethod(i);break;case U.StreamItem:case U.Completion:var s=this._callbacks[i.invocationId];if(s){i.type===U.Completion&&delete this._callbacks[i.invocationId];try{s(i)}catch(t){this._logger.log(o.Error,"Stream callback threw error: "+H(t))}}break;case U.Ping:break;case U.Close:this._logger.log(o.Information,"Close message received from server.");var a=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(a):this._stopPromise=this._stopInternal(a);break;default:this._logger.log(o.Warning,"Invalid message type: "+i.type+".")}}this._resetTimeoutPeriod()},e._processHandshakeResponse=function(t){var e,n;try{var r=this._handshakeProtocol.parseHandshakeResponse(t);n=r[0],e=r[1]}catch(t){var i="Error parsing handshake response: "+t;this._logger.log(o.Error,i);var s=new Error(i);throw this._handshakeRejecter(s),s}if(e.error){var a="Server returned handshake error: "+e.error;this._logger.log(o.Error,a);var c=new Error(a);throw this._handshakeRejecter(c),c}return this._logger.log(o.Debug,"Server handshake complete."),this._handshakeResolver(),n},e._resetKeepAliveInterval=function(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())},e._resetTimeoutPeriod=function(){var t=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout((function(){return t.serverTimeout()}),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){var e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._connectionState!==z.Connected){e.next=9;break}return e.prev=1,e.next=4,t._sendMessage(t._cachedPingMessage);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t._cleanupPingTimer();case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),e)}},e.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e._invokeClientMethod=function(){var t=a(i().mark((function t(e){var n,s,a,c,u,l,h,p,f,g,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.target.toLowerCase(),s=this._methods[n]){t.next=9;break}if(this._logger.log(o.Warning,"No client method with the name '"+n+"' found."),!e.invocationId){t.next=8;break}return this._logger.log(o.Warning,"No result given for '"+n+"' method and invocation ID '"+e.invocationId+"'."),t.next=8,this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null));case 8:return t.abrupt("return");case 9:a=s.slice(),c=!!e.invocationId,p=r(a);case 12:if((f=p()).done){t.next=29;break}return g=f.value,t.prev=14,d=u,t.next=18,g.apply(this,e.arguments);case 18:u=t.sent,c&&u&&d&&(this._logger.log(o.Error,"Multiple results provided for '"+n+"'. Sending error to server."),h=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),l=void 0,t.next=27;break;case 23:t.prev=23,t.t0=t.catch(14),l=t.t0,this._logger.log(o.Error,"A callback for the method '"+n+"' threw error '"+t.t0+"'.");case 27:t.next=12;break;case 29:if(!h){t.next=34;break}return t.next=32,this._sendWithProtocol(h);case 32:t.next=41;break;case 34:if(!c){t.next=40;break}return l?h=this._createCompletionMessage(e.invocationId,""+l,null):void 0!==u?h=this._createCompletionMessage(e.invocationId,null,u):(this._logger.log(o.Warning,"No result given for '"+n+"' method and invocation ID '"+e.invocationId+"'."),h=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),t.next=38,this._sendWithProtocol(h);case 38:t.next=41;break;case 40:u&&this._logger.log(o.Error,"Result given for '"+n+"' method but server is not expecting a result.");case 41:case"end":return t.stop()}}),t,this,[[14,23]])})));return function(e){return t.apply(this,arguments)}}(),e._connectionClosed=function(t){this._logger.log(o.Debug,"HubConnection.connectionClosed("+t+") called while in state "+this._connectionState+"."),this._stopDuringStartError=this._stopDuringStartError||t||new g("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===z.Disconnecting?this._completeClose(t):this._connectionState===z.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===z.Connected&&this._completeClose(t)},e._completeClose=function(t){var e=this;if(this._connectionStarted){this._connectionState=z.Disconnected,this._connectionStarted=!1,x.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach((function(n){return n.apply(e,[t])}))}catch(e){this._logger.log(o.Error,"An onclose callback called with error '"+t+"' threw error '"+e+"'.")}}},e._reconnect=function(){var t=a(i().mark((function t(e){var n,r,s,a,c=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Date.now(),r=0,s=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),null!==(a=this._getNextRetryDelay(r++,0,s))){t.next=8;break}return this._logger.log(o.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e),t.abrupt("return");case 8:if(this._connectionState=z.Reconnecting,e?this._logger.log(o.Information,"Connection reconnecting because of error '"+e+"'."):this._logger.log(o.Information,"Connection reconnecting."),0===this._reconnectingCallbacks.length){t.next=15;break}try{this._reconnectingCallbacks.forEach((function(t){return t.apply(c,[e])}))}catch(t){this._logger.log(o.Error,"An onreconnecting callback called with error '"+e+"' threw error '"+t+"'.")}if(this._connectionState===z.Reconnecting){t.next=15;break}return this._logger.log(o.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting."),t.abrupt("return");case 15:if(null===a){t.next=43;break}return this._logger.log(o.Information,"Reconnect attempt number "+r+" will start in "+a+" ms."),t.next=19,new Promise((function(t){c._reconnectDelayHandle=setTimeout(t,a)}));case 19:if(this._reconnectDelayHandle=void 0,this._connectionState===z.Reconnecting){t.next=23;break}return this._logger.log(o.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting."),t.abrupt("return");case 23:return t.prev=23,t.next=26,this._startInternal();case 26:if(this._connectionState=z.Connected,this._logger.log(o.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach((function(t){return t.apply(c,[c.connection.connectionId])}))}catch(t){this._logger.log(o.Error,"An onreconnected callback called with connectionId '"+this.connection.connectionId+"; threw error '"+t+"'.")}return t.abrupt("return");case 32:if(t.prev=32,t.t0=t.catch(23),this._logger.log(o.Information,"Reconnect attempt failed because of error '"+t.t0+"'."),this._connectionState===z.Reconnecting){t.next=39;break}return this._logger.log(o.Debug,"Connection moved to the '"+this._connectionState+"' from the reconnecting state during reconnect attempt. Done reconnecting."),this._connectionState===z.Disconnecting&&this._completeClose(),t.abrupt("return");case 39:s=t.t0 instanceof Error?t.t0:new Error(t.t0.toString()),a=this._getNextRetryDelay(r++,Date.now()-n,s);case 41:t.next=15;break;case 43:this._logger.log(o.Information,"Reconnect retries have been exhausted after "+(Date.now()-n)+" ms and "+r+" failed attempts. Connection disconnecting."),this._completeClose();case 45:case"end":return t.stop()}}),t,this,[[23,32]])})));return function(e){return t.apply(this,arguments)}}(),e._getNextRetryDelay=function(t,e,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(n){return this._logger.log(o.Error,"IRetryPolicy.nextRetryDelayInMilliseconds("+t+", "+e+") threw error '"+n+"'."),null}},e._cancelCallbacksWithError=function(t){var e=this,n=this._callbacks;this._callbacks={},Object.keys(n).forEach((function(r){var i=n[r];try{i(null,t)}catch(n){e._logger.log(o.Error,"Stream 'error' callback called with '"+t+"' threw error: "+H(n))}}))},e._cleanupPingTimer=function(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)},e._cleanupTimeout=function(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)},e._createInvocation=function(t,e,n,r){if(n)return 0!==r.length?{arguments:e,streamIds:r,target:t,type:U.Invocation}:{arguments:e,target:t,type:U.Invocation};var o=this._invocationId;return this._invocationId++,0!==r.length?{arguments:e,invocationId:o.toString(),streamIds:r,target:t,type:U.Invocation}:{arguments:e,invocationId:o.toString(),target:t,type:U.Invocation}},e._launchStreams=function(t,e){var n=this;if(0!==t.length){e||(e=Promise.resolve());var r=function(r){t[r].subscribe({complete:function(){e=e.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r))}))},error:function(t){var o;o=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((function(){return n._sendWithProtocol(n._createCompletionMessage(r,o))}))},next:function(t){e=e.then((function(){return n._sendWithProtocol(n._createStreamItemMessage(r,t))}))}})};for(var o in t)r(o)}},e._replaceStreamingParams=function(t){for(var e=[],n=[],r=0;r<t.length;r++){var o=t[r];if(this._isObservable(o)){var i=this._invocationId;this._invocationId++,e[i]=o,n.push(i.toString()),t.splice(r,1)}}return[e,n]},e._isObservable=function(t){return t&&t.subscribe&&"function"==typeof t.subscribe},e._createStreamInvocation=function(t,e,n){var r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:U.StreamInvocation}:{arguments:e,invocationId:r.toString(),target:t,type:U.StreamInvocation}},e._createCancelInvocation=function(t){return{invocationId:t,type:U.CancelInvocation}},e._createStreamItemMessage=function(t,e){return{invocationId:t,item:e,type:U.StreamItem}},e._createCompletionMessage=function(t,e,n){return e?{error:e,invocationId:t,type:U.Completion}:{invocationId:t,result:n,type:U.Completion}},u(t,[{key:"state",get:function(){return this._connectionState}},{key:"connectionId",get:function(){return this.connection&&this.connection.connectionId||null}},{key:"baseUrl",get:function(){return this.connection.baseUrl||""},set:function(t){if(this._connectionState!==z.Disconnected&&this._connectionState!==z.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}}]),t}(),J=[0,2e3,1e4,3e4,null],V=function(){function t(t){this._retryDelays=void 0!==t?[].concat(t,[null]):J}return t.prototype.nextRetryDelayInMilliseconds=function(t){return this._retryDelays[t.previousRetryCount]},t}(),Q=function(){};Q.Authorization="Authorization",Q.Cookie="Cookie";var Y,$,Z,tt,et=function(t){function e(e,n){var r;return(r=t.call(this)||this)._innerClient=e,r._accessTokenFactory=n,r}h(e,t);var n=e.prototype;return n.send=function(){var t=a(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!0,!this._accessTokenFactory||this._accessToken&&!(e.url&&e.url.indexOf("/negotiate?")>0)){t.next=6;break}return n=!1,t.next=5,this._accessTokenFactory();case 5:this._accessToken=t.sent;case 6:return this._setAuthorizationHeader(e),t.next=9,this._innerClient.send(e);case 9:if(r=t.sent,!n||401!==r.statusCode||!this._accessTokenFactory){t.next=18;break}return t.next=13,this._accessTokenFactory();case 13:return this._accessToken=t.sent,this._setAuthorizationHeader(e),t.next=17,this._innerClient.send(e);case 17:return t.abrupt("return",t.sent);case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n._setAuthorizationHeader=function(t){t.headers||(t.headers={}),this._accessToken?t.headers[Q.Authorization]="Bearer "+this._accessToken:this._accessTokenFactory&&t.headers[Q.Authorization]&&delete t.headers[Q.Authorization]},n.getCookieString=function(t){return this._innerClient.getCookieString(t)},e}(w);($=Y||(Y={}))[$.None=0]="None",$[$.WebSockets=1]="WebSockets",$[$.ServerSentEvents=2]="ServerSentEvents",$[$.LongPolling=4]="LongPolling",(tt=Z||(Z={}))[tt.Text=1]="Text",tt[tt.Binary=2]="Binary";var nt=function(){function t(){this._isAborted=!1,this.onabort=null}return t.prototype.abort=function(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())},u(t,[{key:"signal",get:function(){return this}},{key:"aborted",get:function(){return this._isAborted}}]),t}(),rt=function(){function t(t,e,n){this._httpClient=t,this._logger=e,this._pollAbort=new nt,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}var e=t.prototype;return e.connect=function(){var t=a(i().mark((function t(e,n){var r,s,a,u,h,p,f,g;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C.isRequired(e,"url"),C.isRequired(n,"transferFormat"),C.isIn(n,Z,"transferFormat"),this._url=e,this._logger.log(o.Trace,"(LongPolling transport) Connecting."),n!==Z.Binary||"undefined"==typeof XMLHttpRequest||"string"==typeof(new XMLHttpRequest).responseType){t.next=7;break}throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");case 7:return s=j(),a=s[0],u=s[1],h=l(((r={})[a]=u,r),this._options.headers),p={abortSignal:this._pollAbort.signal,headers:h,timeout:1e5,withCredentials:this._options.withCredentials},n===Z.Binary&&(p.responseType="arraybuffer"),f=e+"&_="+Date.now(),this._logger.log(o.Trace,"(LongPolling transport) polling: "+f+"."),t.next=15,this._httpClient.get(f,p);case 15:200!==(g=t.sent).statusCode?(this._logger.log(o.Error,"(LongPolling transport) Unexpected response code: "+g.statusCode+"."),this._closeError=new c(g.statusText||"",g.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,p);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e._poll=function(){var t=a(i().mark((function t(e,n){var r,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:if(!this._running){t.next=16;break}return t.prev=2,r=e+"&_="+Date.now(),this._logger.log(o.Trace,"(LongPolling transport) polling: "+r+"."),t.next=7,this._httpClient.get(r,n);case 7:204===(s=t.sent).statusCode?(this._logger.log(o.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==s.statusCode?(this._logger.log(o.Error,"(LongPolling transport) Unexpected response code: "+s.statusCode+"."),this._closeError=new c(s.statusText||"",s.statusCode),this._running=!1):s.content?(this._logger.log(o.Trace,"(LongPolling transport) data received. "+E(s.content,this._options.logMessageContent)+"."),this.onreceive&&this.onreceive(s.content)):this._logger.log(o.Trace,"(LongPolling transport) Poll timed out, reissuing."),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),this._running?t.t0 instanceof f?this._logger.log(o.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t.t0,this._running=!1):this._logger.log(o.Trace,"(LongPolling transport) Poll errored after shutdown: "+t.t0.message);case 14:t.next=1;break;case 16:return t.prev=16,this._logger.log(o.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose(),t.finish(16);case 20:case"end":return t.stop()}}),t,this,[[0,,16,20],[2,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.send=function(){var t=a(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._running){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",I(this._logger,"LongPolling",this._httpClient,this._url,e,this._options));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.stop=function(){var t=a(i().mark((function t(){var e,n,r,s,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._logger.log(o.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort(),t.prev=3,t.next=6,this._receiving;case 6:return this._logger.log(o.Trace,"(LongPolling transport) sending DELETE request to "+this._url+"."),e={},n=j(),r=n[0],s=n[1],e[r]=s,a={headers:l({},e,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},t.next=13,this._httpClient.delete(this._url,a);case 13:this._logger.log(o.Trace,"(LongPolling transport) DELETE request sent.");case 14:return t.prev=14,this._logger.log(o.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose(),t.finish(14);case 18:case"end":return t.stop()}}),t,this,[[3,,14,18]])})));return function(){return t.apply(this,arguments)}}(),e._raiseOnClose=function(){if(this.onclose){var t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(o.Trace,t),this.onclose(this._closeError)}},u(t,[{key:"pollAborted",get:function(){return this._pollAbort.aborted}}]),t}(),ot=function(){function t(t,e,n,r){this._httpClient=t,this._accessToken=e,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}var e=t.prototype;return e.connect=function(){var t=a(i().mark((function t(e,n){var r=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C.isRequired(e,"url"),C.isRequired(n,"transferFormat"),C.isIn(n,Z,"transferFormat"),this._logger.log(o.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(this._accessToken)),t.abrupt("return",new Promise((function(t,i){var s=!1;if(n===Z.Text){var a;if(x.isBrowser||x.isWebWorker)a=new r._options.EventSource(e,{withCredentials:r._options.withCredentials});else{var c=r._httpClient.getCookieString(e),u={};u.Cookie=c;var h=j(),p=h[0],f=h[1];u[p]=f,a=new r._options.EventSource(e,{withCredentials:r._options.withCredentials,headers:l({},u,r._options.headers)})}try{a.onmessage=function(t){if(r.onreceive)try{r._logger.log(o.Trace,"(SSE transport) data received. "+E(t.data,r._options.logMessageContent)+"."),r.onreceive(t.data)}catch(t){return void r._close(t)}},a.onerror=function(t){s?r._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},a.onopen=function(){r._logger.log(o.Information,"SSE connected to "+r._url),r._eventSource=a,s=!0,t()}}catch(t){return void i(t)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.send=function(){var t=a(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._eventSource){t.next=2;break}return t.abrupt("return",Promise.reject(new Error("Cannot send until the transport is connected")));case 2:return t.abrupt("return",I(this._logger,"SSE",this._httpClient,this._url,e,this._options));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.stop=function(){return this._close(),Promise.resolve()},e._close=function(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))},t}(),it=function(){function t(t,e,n,r,o,i){this._logger=n,this._accessTokenFactory=e,this._logMessageContent=r,this._webSocketConstructor=o,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=i}var e=t.prototype;return e.connect=function(){var t=a(i().mark((function t(e,n){var r,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C.isRequired(e,"url"),C.isRequired(n,"transferFormat"),C.isIn(n,Z,"transferFormat"),this._logger.log(o.Trace,"(WebSockets transport) Connecting."),!this._accessTokenFactory){t.next=8;break}return t.next=7,this._accessTokenFactory();case 7:r=t.sent;case 8:return t.abrupt("return",new Promise((function(t,i){var a;e=e.replace(/^http/,"ws");var c=s._httpClient.getCookieString(e),u=!1;if(x.isNode||x.isReactNative){var h={},p=j(),f=p[0],g=p[1];h[f]=g,r&&(h[Q.Authorization]="Bearer "+r),c&&(h[Q.Cookie]=c),a=new s._webSocketConstructor(e,void 0,{headers:l({},h,s._headers)})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(r));a||(a=new s._webSocketConstructor(e)),n===Z.Binary&&(a.binaryType="arraybuffer"),a.onopen=function(n){s._logger.log(o.Information,"WebSocket connected to "+e+"."),s._webSocket=a,u=!0,t()},a.onerror=function(t){var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",s._logger.log(o.Information,"(WebSockets transport) "+e+".")},a.onmessage=function(t){if(s._logger.log(o.Trace,"(WebSockets transport) data received. "+E(t.data,s._logMessageContent)+"."),s.onreceive)try{s.onreceive(t.data)}catch(t){return void s._close(t)}},a.onclose=function(t){if(u)s._close(t);else{var e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",i(new Error(e))}}})));case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.send=function(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(o.Trace,"(WebSockets transport) sending data. "+E(t,this._logMessageContent)+"."),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.stop=function(){return this._webSocket&&this._close(void 0),Promise.resolve()},e._close=function(t){this._webSocket&&(this._webSocket.onclose=function(){},this._webSocket.onmessage=function(){},this._webSocket.onerror=function(){},this._webSocket.close(),this._webSocket=void 0),this._logger.log(o.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: "+t.code+" ("+(t.reason||"no reason given")+").")))},e._isCloseEvent=function(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code},t}(),st=function(){function t(t,e){var r;if(void 0===e&&(e={}),this._stopPromiseResolver=function(){},this.features={},this._negotiateVersion=1,C.isRequired(t,"url"),this._logger=void 0===(r=e.logger)?new D(o.Information):null===r?k.instance:void 0!==r.log?r:new D(r),this.baseUrl=this._resolveUrl(t),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout;var i=null,s=null;if(x.isNode){var a=n;i=a("ws"),s=a("eventsource")}x.isNode||"undefined"==typeof WebSocket||e.WebSocket?x.isNode&&!e.WebSocket&&i&&(e.WebSocket=i):e.WebSocket=WebSocket,x.isNode||"undefined"==typeof EventSource||e.EventSource?x.isNode&&!e.EventSource&&void 0!==s&&(e.EventSource=s):e.EventSource=EventSource,this._httpClient=new et(e.httpClient||new W(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}var e=t.prototype;return e.start=function(){var t=a(i().mark((function t(e){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=e||Z.Binary,C.isIn(e,Z,"transferFormat"),this._logger.log(o.Debug,"Starting connection with transfer format '"+Z[e]+"'."),"Disconnected"===this._connectionState){t.next=5;break}return t.abrupt("return",Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state.")));case 5:return this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),t.next=9,this._startInternalPromise;case 9:if("Disconnecting"!==this._connectionState){t.next=17;break}return n="Failed to start the HttpConnection before stop() was called.",this._logger.log(o.Error,n),t.next=14,this._stopPromise;case 14:return t.abrupt("return",Promise.reject(new g(n)));case 17:if("Connected"===this._connectionState){t.next=21;break}return r="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!",this._logger.log(o.Error,r),t.abrupt("return",Promise.reject(new g(r)));case 21:this._connectionStarted=!0;case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.send=function(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new at(this.transport)),this._sendQueue.send(t))},e.stop=function(){var t=a(i().mark((function t(e){var n=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Disconnected"!==this._connectionState){t.next=3;break}return this._logger.log(o.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnected state."),t.abrupt("return",Promise.resolve());case 3:if("Disconnecting"!==this._connectionState){t.next=6;break}return this._logger.log(o.Debug,"Call to HttpConnection.stop("+e+") ignored because the connection is already in the disconnecting state."),t.abrupt("return",this._stopPromise);case 6:return this._connectionState="Disconnecting",this._stopPromise=new Promise((function(t){n._stopPromiseResolver=t})),t.next=10,this._stopInternal(e);case 10:return t.next=12,this._stopPromise;case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e._stopInternal=function(){var t=a(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stopError=e,t.prev=1,t.next=4,this._startInternalPromise;case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:if(!this.transport){t.next=21;break}return t.prev=9,t.next=12,this.transport.stop();case 12:t.next=18;break;case 14:t.prev=14,t.t1=t.catch(9),this._logger.log(o.Error,"HttpConnection.transport.stop() threw error '"+t.t1+"'."),this._stopConnection();case 18:this.transport=void 0,t.next=22;break;case 21:this._logger.log(o.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");case 22:case"end":return t.stop()}}),t,this,[[1,6],[9,14]])})));return function(e){return t.apply(this,arguments)}}(),e._startInternal=function(){var t=a(i().mark((function t(e){var n,r,s,a,c=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.baseUrl,this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory,t.prev=3,!this._options.skipNegotiation){t.next=14;break}if(this._options.transport!==Y.WebSockets){t.next=11;break}return this.transport=this._constructTransport(Y.WebSockets),t.next=9,this._startTransport(n,e);case 9:t.next=12;break;case 11:throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 12:t.next=23;break;case 14:r=null,s=0,a=i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c._getNegotiationResponse(n);case 2:if(r=t.sent,"Disconnecting"!==c._connectionState&&"Disconnected"!==c._connectionState){t.next=5;break}throw new g("The connection was stopped during negotiation.");case 5:if(!r.error){t.next=7;break}throw new Error(r.error);case 7:if(!r.ProtocolVersion){t.next=9;break}throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");case 9:r.url&&(n=r.url),r.accessToken&&(e=r.accessToken,c._accessTokenFactory=function(){return e},c._httpClient._accessToken=e,c._httpClient._accessTokenFactory=void 0),s++;case 12:case"end":return t.stop()}}),t)}));case 17:return t.delegateYield(a(),"t0",18);case 18:if(r.url&&s<100){t.next=17;break}case 19:if(100!==s||!r.url){t.next=21;break}throw new Error("Negotiate redirection limit exceeded.");case 21:return t.next=23,this._createTransport(n,this._options.transport,r,e);case 23:this.transport instanceof rt&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(o.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected"),t.next=34;break;case 27:return t.prev=27,t.t1=t.catch(3),this._logger.log(o.Error,"Failed to start the connection: "+t.t1),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),t.abrupt("return",Promise.reject(t.t1));case 34:case"end":return t.stop()}}),t,this,[[3,27]])})));return function(e){return t.apply(this,arguments)}}(),e._getNegotiationResponse=function(){var t=a(i().mark((function t(e){var n,r,s,a,u,h,p,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},r=j(),s=r[0],a=r[1],n[s]=a,u=this._resolveNegotiateUrl(e),this._logger.log(o.Debug,"Sending negotiation request: "+u+"."),t.prev=5,t.next=8,this._httpClient.post(u,{content:"",headers:l({},n,this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});case 8:if(200===(h=t.sent).statusCode){t.next=11;break}return t.abrupt("return",Promise.reject(new Error("Unexpected status code returned from negotiate '"+h.statusCode+"'")));case 11:return(!(p=JSON.parse(h.content)).negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),t.abrupt("return",p);case 16:return t.prev=16,t.t0=t.catch(5),f="Failed to complete negotiation with the server: "+t.t0,t.t0 instanceof c&&404===t.t0.statusCode&&(f+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(o.Error,f),t.abrupt("return",Promise.reject(new b(f)));case 22:case"end":return t.stop()}}),t,this,[[5,16]])})));return function(e){return t.apply(this,arguments)}}(),e._createConnectUrl=function(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id="+e:t},e._createTransport=function(){var t=a(i().mark((function t(e,n,s,a){var c,u,l,h,p,f,d,_,b;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=this._createConnectUrl(e,s.connectionToken),!this._isITransport(n)){t.next=8;break}return this._logger.log(o.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,t.next=6,this._startTransport(c,a);case 6:return this.connectionId=s.connectionId,t.abrupt("return");case 8:u=[],l=s.availableTransports||[],h=s,p=r(l);case 12:if((f=p()).done){t.next=51;break}if(d=f.value,!((_=this._resolveTransportOrError(d,n,a))instanceof Error)){t.next=20;break}u.push(d.transport+" failed:"),u.push(_),t.next=49;break;case 20:if(!this._isITransport(_)){t.next=49;break}if(this.transport=_,h){t.next=33;break}return t.prev=23,t.next=26,this._getNegotiationResponse(e);case 26:h=t.sent,t.next=32;break;case 29:return t.prev=29,t.t0=t.catch(23),t.abrupt("return",Promise.reject(t.t0));case 32:c=this._createConnectUrl(e,h.connectionToken);case 33:return t.prev=33,t.next=36,this._startTransport(c,a);case 36:return this.connectionId=h.connectionId,t.abrupt("return");case 40:if(t.prev=40,t.t1=t.catch(33),this._logger.log(o.Error,"Failed to start the transport '"+d.transport+"': "+t.t1),h=void 0,u.push(new v(d.transport+" failed: "+t.t1,Y[d.transport])),"Connecting"===this._connectionState){t.next=49;break}return b="Failed to select transport before stop() was called.",this._logger.log(o.Debug,b),t.abrupt("return",Promise.reject(new g(b)));case 49:t.next=12;break;case 51:if(!(u.length>0)){t.next=53;break}return t.abrupt("return",Promise.reject(new m("Unable to connect to the server with any of the available transports. "+u.join(" "),u)));case 53:return t.abrupt("return",Promise.reject(new Error("None of the transports supported by the client are supported by the server.")));case 54:case"end":return t.stop()}}),t,this,[[23,29],[33,40]])})));return function(e,n,r,o){return t.apply(this,arguments)}}(),e._constructTransport=function(t){switch(t){case Y.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new it(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Y.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new ot(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Y.LongPolling:return new rt(this._httpClient,this._logger,this._options);default:throw new Error("Unknown transport: "+t+".")}},e._startTransport=function(t,e){var n=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=function(t){return n._stopConnection(t)},this.transport.connect(t,e)},e._resolveTransportOrError=function(t,e,n){var r=Y[t.transport];if(null==r)return this._logger.log(o.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client."),new Error("Skipping transport '"+t.transport+"' because it is not supported by this client.");if(!function(t,e){return!t||0!=(e&t)}(e,r))return this._logger.log(o.Debug,"Skipping transport '"+Y[r]+"' because it was disabled by the client."),new _("'"+Y[r]+"' is disabled by the client.",r);if(!(t.transferFormats.map((function(t){return Z[t]})).indexOf(n)>=0))return this._logger.log(o.Debug,"Skipping transport '"+Y[r]+"' because it does not support the requested transfer format '"+Z[n]+"'."),new Error("'"+Y[r]+"' does not support "+Z[n]+".");if(r===Y.WebSockets&&!this._options.WebSocket||r===Y.ServerSentEvents&&!this._options.EventSource)return this._logger.log(o.Debug,"Skipping transport '"+Y[r]+"' because it is not supported in your environment.'"),new d("'"+Y[r]+"' is not supported in your environment.",r);this._logger.log(o.Debug,"Selecting transport '"+Y[r]+"'.");try{return this._constructTransport(r)}catch(t){return t}},e._isITransport=function(t){return t&&"object"==typeof t&&"connect"in t},e._stopConnection=function(t){var e=this;if(this._logger.log(o.Debug,"HttpConnection.stopConnection("+t+") called while in state "+this._connectionState+"."),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(o.Warning,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is still in the connecting state."),new Error("HttpConnection.stopConnection("+t+") was called while the connection is still in the connecting state.");if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(o.Error,"Connection disconnected with error '"+t+"'."):this._logger.log(o.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch((function(t){e._logger.log(o.Error,"TransportSendQueue.stop() threw error '"+t+"'.")})),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(o.Error,"HttpConnection.onclose("+t+") threw error '"+e+"'.")}}}else this._logger.log(o.Debug,"Call to HttpConnection.stopConnection("+t+") was ignored because the connection is already in the disconnected state.")},e._resolveUrl=function(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!x.isBrowser)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this._logger.log(o.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},e._resolveNegotiateUrl=function(t){var e=t.indexOf("?"),n=t.substring(0,-1===e?t.length:e);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",-1===(n+=-1===e?"":t.substring(e)).indexOf("negotiateVersion")&&(n+=-1===e?"?":"&",n+="negotiateVersion="+this._negotiateVersion),n},t}(),at=function(){function t(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new ct,this._transportResult=new ct,this._sendLoopPromise=this._sendLoop()}var e=t.prototype;return e.send=function(t){return this._bufferData(t),this._transportResult||(this._transportResult=new ct),this._transportResult.promise},e.stop=function(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise},e._bufferData=function(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error("Expected data to be of type "+typeof this._buffer+" but was of type "+typeof t);this._buffer.push(t),this._sendBufferedData.resolve()},e._sendLoop=function(){var e=a(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this._sendBufferedData.promise;case 3:if(this._executing){e.next=6;break}return this._transportResult&&this._transportResult.reject("Connection stopped."),e.abrupt("break",22);case 6:return this._sendBufferedData=new ct,n=this._transportResult,this._transportResult=void 0,r="string"==typeof this._buffer[0]?this._buffer.join(""):t._concatBuffers(this._buffer),this._buffer.length=0,e.prev=11,e.next=14,this._transport.send(r);case 14:n.resolve(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),n.reject(e.t0);case 20:e.next=0;break;case 22:case"end":return e.stop()}}),e,this,[[11,17]])})));return function(){return e.apply(this,arguments)}}(),t._concatBuffers=function(t){for(var e,n=t.map((function(t){return t.byteLength})).reduce((function(t,e){return t+e})),o=new Uint8Array(n),i=0,s=r(t);!(e=s()).done;){var a=e.value;o.set(new Uint8Array(a),i),i+=a.byteLength}return o.buffer},t}(),ct=function(){function t(){var t=this;this.promise=new Promise((function(e,n){var r;return r=[e,n],t._resolver=r[0],t._rejecter=r[1],r}))}var e=t.prototype;return e.resolve=function(){this._resolver()},e.reject=function(t){this._rejecter(t)},t}(),ut=function(){function t(){this.name="json",this.version=1,this.transferFormat=Z.Text}var e=t.prototype;return e.parseMessages=function(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=k.instance);for(var n,i=[],s=r(F.parse(t));!(n=s()).done;){var a=n.value,c=JSON.parse(a);if("number"!=typeof c.type)throw new Error("Invalid payload.");switch(c.type){case U.Invocation:this._isInvocationMessage(c);break;case U.StreamItem:this._isStreamItemMessage(c);break;case U.Completion:this._isCompletionMessage(c);break;case U.Ping:case U.Close:break;default:e.log(o.Information,"Unknown message type '"+c.type+"' ignored.");continue}i.push(c)}return i},e.writeMessage=function(t){return F.write(JSON.stringify(t))},e._isInvocationMessage=function(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")},e._isStreamItemMessage=function(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")},e._isCompletionMessage=function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")},e._assertNotEmptyString=function(t,e){if("string"!=typeof t||""===t)throw new Error(e)},t}(),lt={trace:o.Trace,debug:o.Debug,info:o.Information,information:o.Information,warn:o.Warning,warning:o.Warning,error:o.Error,critical:o.Critical,none:o.None},ht=function(){function t(){}var e=t.prototype;return e.configureLogging=function(t){if(C.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"==typeof t){var e=function(t){var e=lt[t.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: "+t)}(t);this.logger=new D(e)}else this.logger=new D(t);return this},e.withUrl=function(t,e){return C.isRequired(t,"url"),C.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions=l({},this.httpConnectionOptions,"object"==typeof e?e:{transport:e}),this},e.withHubProtocol=function(t){return C.isRequired(t,"protocol"),this.protocol=t,this},e.withAutomaticReconnect=function(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new V(t):this.reconnectPolicy=t:this.reconnectPolicy=new V,this},e.build=function(){var t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new st(this.url,t);return G.create(e,this.logger||k.instance,this.protocol||new ut,this.reconnectPolicy)},t}();return Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,e){return new Uint8Array(Array.prototype.slice.call(this,t,e))},writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0}),e}()},"object"==typeof e&&"object"==typeof o?o.exports=g():"function"==typeof define&&define.amd?define([],g):"object"==typeof e?e.signalR=g():f.signalR=g(),t("default",o.exports),o.exports.signalR,o.exports.__esModule}),{})}}}));

System.register("chunks:///_virtual/signalr.mjs_cjs=&original=.js",["./signalr.js","./cjs-loader.mjs"],(function(e,r){var t,s;return{setters:[function(r){t=r.__cjsMetaURL;var s={};s.__cjsMetaURL=r.__cjsMetaURL,s.default=r.default,e(s)},function(e){s=e.default}],execute:function(){t||s.throwInvalidWrapper("./signalr.js",r.meta.url),s.require(t)}}}));

} }; });